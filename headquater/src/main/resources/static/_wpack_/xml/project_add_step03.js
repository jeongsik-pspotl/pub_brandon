/*amd /xml/project_add_step03.xml 23761 9a3c4f8be1d80ca277075d895abceb734f3137c878008dbb575844f4c49b8ecc */
define({declaration:{A:{version:"1.0",encoding:"UTF-8"}},E:[{T:1,N:"html",A:{xmlns:"http://www.w3.org/1999/xhtml","xmlns:ev":"http://www.w3.org/2001/xml-events","xmlns:w2":"http://www.inswave.com/websquare","xmlns:xf":"http://www.w3.org/2002/xforms"},E:[{T:1,N:"head",E:[{T:1,N:"w2:type",E:[{T:3,text:"DEFAULT"}]},{T:1,N:"w2:buildDate"},{T:1,N:"xf:model",E:[{T:1,N:"w2:dataCollection",A:{baseNode:"map"}},{T:1,N:"w2:workflowCollection"}]},{T:1,N:"script",A:{type:"text/javascript",lazy:"false"},E:[{T:4,cdata:function(scopeObj){with(scopeObj)scwin.hybrid_server_config_select_yn=!1,scwin.platformType="",scwin.workspace_name=localStorage.getItem("__workspace_name__"),scwin.createProjectToFlag_yn=!1,serverinfo_itemIdx=0,scwin.onpageload=function(){common.setScopeObj(scwin),$(".tooltip_box .ico_tip").click(function(){$(this).siblings(".tip_desc").toggleClass("on").parent().parent().siblings().children().children(".tip_desc").removeClass("on")}),$p.parent().btn_proejct_step04.setDisabled(!0),$p.parent().btn_proejct_step05.setDisabled(!0),scwin.initPage()},scwin.onpageunload=function(){},scwin.initPage=function(){var buildproj_json=$p.parent().dtl_build_project_step1.getRowJSON(0);scwin.platformType=buildproj_json.platform,"Android"==scwin.platformType,btn_next.hide(),input_appname_1.setDisabled(!0)},scwin.createBuildProject=function(){var buildproj_json=$p.parent().dtl_build_project_step1.getRowJSON(0),buildsetting_json=$p.parent().dtl_build_project_step2.getRowJSON(0),templateCheck=buildproj_json.template_version,serverConfigArray=[],server1Json={};server1Json.Name=input_appname_1.getValue(),server1Json.AppID=input_appid_1.getValue(),server1Json.ServerURL=input_serverurl_1.getValue(),serverConfigArray.push(server1Json);for(var i=0;i<serverinfo_itemIdx;i++){var servertempJson={},server_name=$p.getComponentById("myid_name_input_"+i),server_app_id=$p.getComponentById("myid_app_id_input_"+i),server_url=$p.getComponentById("myid_server_url_input_"+i);null!=server_name&&(servertempJson.Name=server_name.getValue()),null!=server_app_id&&(servertempJson.AppID=server_app_id.getValue()),null!=server_url&&(servertempJson.ServerURL=server_url.getValue(),serverConfigArray.push(servertempJson))}server1Json=common.getLabel("lbl_not_select");""==templateCheck||templateCheck==server1Json?scwin.setBuildSetting(buildproj_json,buildsetting_json,serverConfigArray):scwin.setTemplateProjectCopy(buildproj_json,buildsetting_json,serverConfigArray)},scwin.btn_prev_onclick=function(e){$p.parent().scwin.selected_step(2)},scwin.btn_next_onclick=function(e){var message;scwin.createProjectToFlag_yn?$p.parent().scwin.selected_step(4):(message=common.getLabel("lbl_project_add_step03_js_move_plugin_page"),alert(message))},scwin.webSocketCallback=function(obj){switch(obj.MsgType){case"HV_MSG_CONNETCION_CHECK_INFO_FROM_HEADQUATER":case"HV_MSG_PROJECT_CREATE_GITHUB_CLONE_INFO_FROM_HEADQUATER":scwin.setBranchProjectCreateSyncStatus(obj);break;case"HV_MSG_WINDOWS_CONFIG_LIST_INFO_FROM_HEADQUATER":break;case"HV_MSG_PROJECT_TEMPLATE_STATUS_INFO_FROM_HEADQUATER":scwin.setBranchProjectCreateSyncStatus(obj)}},scwin.setBranchProjectCreateSyncStatus=function(obj){switch(obj.gitStatus){case"GITCLONE":var message=common.getLabel("lbl_git_clone");WebSquare.layer.showProcessMessage(message);break;case"SVNCHECKOUT":message=common.getLabel("lbl_svn_checkout");WebSquare.layer.showProcessMessage(message);break;case"APPICONUNZIP":message=common.getLabel("lbl_app_icon_uploading");WebSquare.layer.showProcessMessage(message);break;case"FILEUPLOAD":message=common.getLabel("lbl_signingkey_uploading");WebSquare.layer.showProcessMessage(message);break;case"CONFIG":message=common.getLabel("lbl_app_config_setting");WebSquare.layer.showProcessMessage(message);break;case"GITCOMMIT":message=common.getLabel("lbl_git_commit");WebSquare.layer.showProcessMessage(message);break;case"GITADD":message=common.getLabel("lbl_git_add");WebSquare.layer.showProcessMessage(message);break;case"GITPUSH":message=common.getLabel("lbl_git_push");WebSquare.layer.showProcessMessage(message);break;case"SVNADD":message=common.getLabel("lbl_svn_add");WebSquare.layer.showProcessMessage(message);break;case"MKDIR":message=common.getLabel("lbl_project_dir_create");WebSquare.layer.showProcessMessage(message);break;case"GITBARE":message=common.getLabel("lbl_git_bare_init");WebSquare.layer.showProcessMessage(message);break;case"PROJCOPY":message=common.getLabel("lbl_project_zip_copy");WebSquare.layer.showProcessMessage(message);break;case"DONE":WebSquare.layer.hideProcessMessage();message=common.getLabel("lbl_project_add_step03_js_created_project");alert(message),null==obj.projectDirPath||$p.parent().dtl_build_project_step1.setCellData(0,"project_dir_path",obj.projectDirPath),scwin.btn_project_step4_checkYn=!0,scwin.createProjectToFlag_yn=!0,btn_create_project_trigger.setDisabled(!0),btn_next.show()}},scwin.sendBranchSigningKeyAPI=function(obj){$.ajax({url:"/api/singingkey/profilesend",type:"post",accept:"application/json",contentType:"application/json; charset=utf-8",data:JSON.stringify(obj),dataType:"json",success:function(r,status){"Created"===status},error:function(request,status,error){200==request.status||alert("code:"+request.status+"\nmessage:"+request.responseText+"\n")}})},scwin.setBuildSetting=function(buildproj_json,buildsetting_json,serverConfigArray){var build_all_in_json={},buildproj_json=(build_all_in_json.workspace_group_role_id=localStorage.getItem("__workspace_group_role_id__"),build_all_in_json.buildProject=buildproj_json,build_all_in_json.buildSetting=buildsetting_json,build_all_in_json.serverConfig=serverConfigArray,{});buildproj_json.action="/manager/build/project/create/vcs",buildproj_json.mode="asynchronous",buildproj_json.mediatype="application/json",buildproj_json.requestData=JSON.stringify(build_all_in_json),buildproj_json.method="POST",buildproj_json.success=function(e){var data=e.responseJSON;200!==e.responseStatusCode&&201!==e.responseStatusCode||null==data?(e=common.getLabel("lbl_failed_create_project"),alert(e)):(e=data[0].build_id,$p.parent().dtl_build_project_step1.setCellData(0,"project_id",e),localStorage.setItem("__create_build_id__",e),btn_create_project_trigger.setDisabled(!0))},buildproj_json.error=function(e){alert("code:"+e.responseStatusCode+"\nmessage:"+e.responseText+"\nerror:"+e.requestBody)},$p.ajax(buildproj_json)},scwin.setTemplateProjectCopy=function(buildproj_json,buildsetting_json,serverConfigArray){var build_all_in_json={},buildproj_json=(build_all_in_json.workspace_group_role_id=localStorage.getItem("__workspace_group_role_id__"),("Android"==scwin.platformType||"iOS"==scwin.platformType)&&(build_all_in_json.packageName=""),build_all_in_json.buildProject=buildproj_json,build_all_in_json.buildSetting=buildsetting_json,build_all_in_json.serverConfig=serverConfigArray,{});buildproj_json.action="/manager/build/project/create/templateProject",buildproj_json.mode="asynchronous",buildproj_json.mediatype="application/json",buildproj_json.requestData=JSON.stringify(build_all_in_json),buildproj_json.method="POST",buildproj_json.success=function(e){var data=e.responseJSON;200!==e.responseStatusCode&&201!==e.responseStatusCode||null==data?(e=common.getLabel("lbl_failed_create_project"),alert(e)):(e=data[0].build_id,$p.parent().dtl_build_project_step1.setCellData(0,"project_id",e),localStorage.setItem("__create_build_id__",e),btn_create_project_trigger.setDisabled(!0))},buildproj_json.error=function(e){alert("code:"+e.responseStatusCode+"\nmessage:"+e.responseText+"\n")},$p.ajax(buildproj_json)},scwin.checkData=function(){var appIDCheck1,server_name_1=input_appname_1.getValue(),app_id1=input_appid_1.getValue(),server_URL1=input_serverurl_1.getValue();if(common.isEmptyStr(server_name_1))return message=common.getLabel("lbl_check_server_name"),alert(message),!1;if(common.isEmptyStr(app_id1))return message=common.getLabel("lbl_input_appid"),alert(message),!1;if(common.isEmptyStr(server_URL1))return message=common.getLabel("lbl_project_add_step03_js_input_server_url"),alert(message),!1;if(common.getCheckInputLength(server_URL1,server_URL1.length,200))return!1;if(common.checkAllInputText("CHECK_INPUT_TYPE_KOR","")&&"Android"==scwin.platformType)return message=common.getLabel("lbl_package_name_kor_rule"),alert(" : "+message),!1;if(common.checkAllInputText("CHECK_INPUT_TYPE_KOR","")&&"iOS"==scwin.platformType)return message=common.getLabel("lbl_proejct_name_kor_rule"),alert(" : "+message),!1;if(common.checkAllInputText("CHECK_INPUT_TYPE_KOR",server_name_1))return message=common.getLabel("lbl_server_name_kor_rule"),alert(server_name_1+" : "+message),!1;if(common.checkAllInputText("CHECK_INPUT_TYPE_KOR",server_URL1))return message=common.getLabel("lbl_project_add_step03_js_check_server_url_kor"),alert(server_URL1+" : "+message),!1;if(common.checkAllInputText("CHECK_INPUT_TYPE_SPC","")&&"Android"==scwin.platformType)return message=common.getLabel("lbl_package_name_special_char_rule"),alert(" : "+message),!1;if(common.checkAllInputText("CHECK_INPUT_TYPE_SPC","")&&"iOS"==scwin.platformType)return message=common.getLabel("lbl_project_name_special_char_rule"),alert(" : "+message),!1;if(common.checkAllInputText("CHECK_INPUT_TYPE_SPC",server_name_1))return message=common.getLabel("lbl_server_name_special_char_rule"),alert(server_name_1+" : "+message),!1;if(!(3<=(appIDCheck1=app_id1.split(".")).length||4<=appIDCheck1.length))return message=common.getLabel("lbl_appid_check_form"),alert(app_id1+" : "+message),!1;for(var i=0;i<appIDCheck1.length;i++){var strAppID=appIDCheck1[i];if(!common.checkAllInputText("CHECK_INPUT_TYPE_APP_ID2",strAppID))return message=common.getLabel("lbl_appid_check_form"),alert(app_id+" : "+message),!1}for(i=0;i<serverinfo_itemIdx;i++){var appIDCheckAll,servertempJson={},server_name=$p.getComponentById("myid_name_input_"+i),server_app_id=$p.getComponentById("myid_app_id_input_"+i),server_url=$p.getComponentById("myid_server_url_input_"+i);if(null!=server_name&&(servertempJson.Name=server_name.getValue()),null!=server_app_id&&(servertempJson.AppID=server_app_id.getValue()),null!=server_url&&(servertempJson.ServerURL=server_url.getValue()),common.checkAllInputText("CHECK_INPUT_TYPE_KOR",servertempJson.Name))return message=common.getLabel("lbl_project_add_step03_js_check_server_name_kor"),alert(servertempJson.Name+" : "+message),!1;if(common.checkAllInputText("CHECK_INPUT_TYPE_KOR",servertempJson.ServerURL))return message=common.getLabel("lbl_project_add_step03_js_check_server_url_kor"),alert(servertempJson.ServerURL+" : "+message),!1;if(common.checkAllInputText("CHECK_INPUT_TYPE_SPC",servertempJson.Name))return message=common.getLabel("lbl_server_name_special_char_rule"),alert(servertempJson.Name+" : "+message),!1;if(null!=server_app_id){if(!(3<=(appIDCheckAll=servertempJson.AppID.split(".")).length||4<=appIDCheckAll.length))return message=common.getLabel("lbl_appid_check_form"),alert(servertempJson.AppID+" : "+message),!1;for(i=0;i<appIDCheckAll.length;i++){var message,strAppID=appIDCheckAll[i];if(!common.checkAllInputText("CHECK_INPUT_TYPE_APP_ID2",strAppID))return message=common.getLabel("lbl_appid_check_form"),alert(servertempJson.AppID+" : "+message),!1}}}return!0},scwin.btn_append_input_android_bundle_id_onclick=function(e){var group_ul1=WebSquare.util.dynamicCreate("myid_group_ul_"+serverinfo_itemIdx,"group",{tagname:"ul"},group_server_info_main),group_li1=WebSquare.util.dynamicCreate("myid_group_li_1_"+serverinfo_itemIdx,"group",{tagname:"li"},group_ul1),append_output_name=WebSquare.util.dynamicCreate("myid_name_"+serverinfo_itemIdx,"textbox",{className:"w2textbox form_name"},group_li1),message_name=common.getLabel("lbl_name"),append_output_name=(append_output_name.setLabel(message_name),WebSquare.util.dynamicCreate("myid_name_input_"+serverinfo_itemIdx,"input",{},group_li1),WebSquare.util.dynamicCreate("myid_group_li_2_"+serverinfo_itemIdx,"group",{tagname:"li"},group_ul1)),message_name=WebSquare.util.dynamicCreate("myid_app_id_"+serverinfo_itemIdx,"textbox",{className:"w2textbox form_name"},append_output_name),group_li1=common.getLabel("lbl_appid"),message_name=(message_name.setLabel(group_li1),WebSquare.util.dynamicCreate("myid_app_id_input_"+serverinfo_itemIdx,"input",{},append_output_name),WebSquare.util.dynamicCreate("myid_group_li_3_"+serverinfo_itemIdx,"group",{tagname:"li"},group_ul1)),group_li1=WebSquare.util.dynamicCreate("myid_server_url_"+serverinfo_itemIdx,"textbox",{className:"w2textbox form_name"},message_name),append_output_name=common.getLabel("lbl_serverurl"),group_li1=(group_li1.setLabel(append_output_name),WebSquare.util.dynamicCreate("myid_group_ipt_box_3_"+serverinfo_itemIdx,"group",{className:"ipt_box"},message_name)),append_output_name=(WebSquare.util.dynamicCreate("myid_server_url_input_"+serverinfo_itemIdx,"input",{},group_li1),WebSquare.util.dynamicCreate("myid_server_url_trigger_"+serverinfo_itemIdx,"trigger",{className:"btn_cm"},group_li1)),message_name=common.getLabel("lbl_dash");append_output_name.setLabel(message_name),append_output_name.bind("onclick",function(e){group_ul1.remove()}),serverinfo_itemIdx++},scwin.btn_trigger_group_delete_onclick=function(e){},scwin.btn_getbuildproject_add_onclick=function(){var message;scwin.checkData()&&(message=common.getLabel("lbl_confirm_create_project"),confirm(message)&&scwin.createBuildProject())}}}]}]},{T:1,N:"body",A:{"ev:onpageload":"scwin.onpageload","ev:onpageunload":"scwin.onpageunload"},E:[{T:1,N:"xf:group",A:{class:"gallery_box",id:"",style:""},E:[{T:1,N:"xf:group",A:{class:"dfbox",id:"",style:""},E:[{T:1,N:"w2:textbox",A:{class:"gal_tit fl",id:"",label:"",style:"",useLocale:"true",localeRef:"lbl_project_add_step03_title"}},{T:1,N:"xf:group",A:{class:"fr"},E:[{T:1,N:"w2:textbox",A:{class:"txt_chk",id:"",label:"",style:"",useLocale:"true",localeRef:"lbl_confirm_create_project"}},{T:1,N:"xf:trigger",A:{class:"btn_cm type1",id:"btn_create_project_trigger",style:"",type:"button","ev:onclick":"scwin.btn_getbuildproject_add_onclick",useLocale:"true",localeRef:"lbl_create"},E:[{T:1,N:"xf:label"}]}]}]},{T:1,N:"xf:group",A:{class:"gal_body",id:"",style:""},E:[{T:1,N:"xf:group",A:{id:"group_server_info_main",style:"",class:"form_wrap"},E:[{T:1,N:"xf:group",A:{id:"",style:"",class:"",tagname:"ul"},E:[{T:1,N:"xf:group",A:{id:"",style:"",class:"tooltip_box",tagname:"li"},E:[{T:1,N:"xf:group",A:{class:"ipt_box",id:"",style:""},E:[{T:1,N:"w2:textbox",A:{id:"",style:"",class:"form_name",label:"",useLocale:"true",localeRef:"lbl_name"}},{T:1,N:"w2:anchor",A:{class:"ico_tip",id:"",outerDiv:"false",style:"",toolTip:"tooltip",toolTipDisplay:"true",useLocale:"true",tooltipLocaleRef:"lbl_wmatrix_server_name"},E:[{T:1,N:"xf:label"}]}]},{T:1,N:"xf:input",A:{adjustMaxLength:"false",id:"input_appname_1",style:"",initValue:"Release"}}]},{T:1,N:"xf:group",A:{id:"",style:"",class:"tooltip_box",tagname:"li"},E:[{T:1,N:"xf:group",A:{class:"ipt_box",id:"",style:""},E:[{T:1,N:"w2:textbox",A:{id:"",style:"",class:"form_name",label:"",useLocale:"true",localeRef:"lbl_appid"}},{T:1,N:"w2:anchor",A:{class:"ico_tip",id:"",outerDiv:"false",style:"",toolTip:"tooltip",toolTipDisplay:"true",useLocale:"true",tooltipLocaleRef:"lbl_wmatrix_used_appid"},E:[{T:1,N:"xf:label"}]}]},{T:1,N:"xf:input",A:{adjustMaxLength:"false",id:"input_appid_1",style:"",initValue:""}}]},{T:1,N:"xf:group",A:{id:"",style:"",class:"tooltip_box",tagname:"li"},E:[{T:1,N:"xf:group",A:{class:"ipt_box",id:"",style:""},E:[{T:1,N:"w2:textbox",A:{id:"",style:"",class:"form_name",label:"",useLocale:"true",localeRef:"lbl_server_address"}},{T:1,N:"w2:anchor",A:{class:"ico_tip",id:"",outerDiv:"false",style:"",toolTip:"tooltip",toolTipDisplay:"true",useLocale:"true",tooltipLocaleRef:"lbl_wmatrix_server_address"},E:[{T:1,N:"xf:label"}]}]},{T:1,N:"xf:group",A:{id:"",style:"",class:"ipt_box",tagname:""},E:[{T:1,N:"xf:input",A:{adjustMaxLength:"false",id:"input_serverurl_1",style:""}},{T:1,N:"xf:trigger",A:{id:"",style:"",class:"btn_cm",type:"button","ev:onclick":"scwin.btn_append_input_android_bundle_id_onclick",useLocale:"true",localeRef:"lbl_plus"},E:[{T:1,N:"xf:label"}]}]}]}]}]},{T:1,N:"w2:anchor",A:{class:"gal_prev",id:"btn_prev",outerDiv:"false",style:"","ev:onclick":"scwin.btn_prev_onclick",useLocale:"true",localeRef:"lbl_prev"},E:[{T:1,N:"xf:label"}]},{T:1,N:"w2:anchor",A:{class:"gal_next",id:"btn_next",outerDiv:"false",style:"","ev:onclick":"scwin.btn_next_onclick",useLocale:"true",localeRef:"lbl_next"},E:[{T:1,N:"xf:label"}]}]}]}]}]}]});
