/*amd /xml/deploy_history_detail.xml 7563 d3e1f25fc816d16cc6f2f2fdeb6734d38a74723c8853f57254f5a2d6fe8a738d */
define({declaration:{A:{version:"1.0",encoding:"UTF-8"}},E:[{T:1,N:"html",A:{xmlns:"http://www.w3.org/1999/xhtml","xmlns:ev":"http://www.w3.org/2001/xml-events","xmlns:w2":"http://www.inswave.com/websquare","xmlns:xf":"http://www.w3.org/2002/xforms"},E:[{T:1,N:"head",E:[{T:1,N:"w2:type",E:[{T:3,text:"DEFAULT"}]},{T:1,N:"w2:buildDate"},{T:1,N:"xf:model",E:[{T:1,N:"w2:dataCollection",A:{baseNode:"map"}},{T:1,N:"w2:workflowCollection"}]},{T:1,N:"script",A:{type:"text/javascript",src:"/js/lib/qrcode.min.js"}},{T:1,N:"script",A:{type:"text/javascript",lazy:"false"},E:[{T:4,cdata:function(scopeObj){with(scopeObj)scwin.onpageload=function(){common.setScopeObj(scwin),scwin.initPage()},scwin.onpageunload=function(){},scwin.initPage=function(){localStorage.getItem("historyPlatform"),localStorage.getItem("historyProjectName");var historyProjectId=localStorage.getItem("historyProjectId"),data={},historyProjectId=(data.projectID=historyProjectId,{});historyProjectId.action="/manager/deploy/history/search/historyList",historyProjectId.mode="asynchronous",historyProjectId.mediatype="application/json",historyProjectId.method="POST",historyProjectId.requestData=JSON.stringify(data),historyProjectId.success=function(e){var e=e.responseJSON;null!=e?(scwin.selecthistorydetail(e),$(".qrcode").click(function(){$(".layer_pop").css("display","block").css("width","180px").css("height","220px"),$("body").append("<div class='dim'></div>")}),$(".btn_pop_close").click(function(){$(".layer_pop").css("display","none"),$("div").remove(".dim")})):(e=common.getLabel("lbl_failed_history"),alert(e))},historyProjectId.error=function(e){alert("message:"+e.responseText+"\n")},$p.ajax(historyProjectId)},scwin.webSocketCallback=function(obj){"HV_MSG_APP_DOWNLOAD_STATUS_INFO_FROM_HEADQUATER"===obj.MsgType&&scwin.setBuilderAppDownloadHref(obj)},scwin.setBuilderAppDownloadHref=function(data){window.location="/manager/build/history/downloadSetupFile/"+data.filename},scwin.selecthistorydetail=function(data){var idx,historyProjectName=localStorage.getItem("historyProjectName"),message=common.getLabel("lbl_project_history");for(idx in txt_project_history_name.setValue(historyProjectName+" "+message),data){list_buildhistory_detail_generator.insertChild();var txt_proj_history_list=list_buildhistory_detail_generator.getChild(idx,"txt_proj_history"),txt_build_start_date_list=list_buildhistory_detail_generator.getChild(idx,"txt_build_start_date"),txt_build_end_date_list=list_buildhistory_detail_generator.getChild(idx,"txt_build_end_date"),txt_history_build_project_name_list=list_buildhistory_detail_generator.getChild(idx,"txt_history_build_project_name"),txt_history_logfile_download_url_list=list_buildhistory_detail_generator.getChild(idx,"history_logfile_url"),message_status=(parseInt(data[idx].deploy_history_id),parseInt(data[idx].project_id),parseInt(idx),"SUCCESSFUL"==data[idx].result?txt_proj_history_list.changeClass("txt_name fail","txt_name success"):txt_proj_history_list.changeClass("txt_name success","txt_name fail"),null!=data[idx].deploy_start_date&&(data[idx].deploy_start_date=data[idx].deploy_start_date.replace(/T/g," ")),null!=data[idx].deploy_end_date&&(data[idx].deploy_end_date=data[idx].deploy_end_date.replace(/T/g," ")),common.getLabel("lbl_state")),message_dist_start_time=common.getLabel("lbl_deploy_history_detail_js_distribute_start_time"),message_dist_end_time=common.getLabel("lbl_deploy_history_detail_js_distribute_end_time"),message_project_name=common.getLabel("lbl_project_name");txt_proj_history_list.setValue(message_status+" : "+data[idx].result),txt_build_start_date_list.setValue(message_dist_start_time+" : "+data[idx].deploy_start_date),txt_build_end_date_list.setValue(message_dist_end_time+" : "+data[idx].deploy_end_date),txt_history_build_project_name_list.setValue(message_project_name+" : "+historyProjectName),txt_history_logfile_download_url_list.setUserData("historyid",data[idx].deploy_history_id)}},scwin.gethistoryfileurl_onclick=function(e){var history_id=this.getUserData("historyid"),data={},options={};data.history_id=history_id,options.action="/manager/deploy/history/download/logFileFromWebSocket",options.mode="asynchronous",options.mediatype="application/json",options.requestData=JSON.stringify(data),options.method="POST",options.success=function(e){null!=e.responseJSON&&[]},options.error=function(e){alert("message:"+e.responseText+"\n")},$p.ajax(options)}}}]}]},{T:1,N:"body",A:{"ev:onpageload":"scwin.onpageload","ev:onpageunload":"scwin.onpageunload"},E:[{T:1,N:"xf:group",A:{class:"sub_contents",id:"",style:""},E:[{T:1,N:"xf:group",A:{id:"",style:"",class:"white_board"},E:[{T:1,N:"xf:group",A:{id:"",style:"",class:"pgtbox"},E:[{T:1,N:"w2:textbox",A:{id:"txt_project_history_name",style:"",class:"pgt_tit fl",label:"",useLocale:"true",localeRef:"lbl_history2"}}]},{T:1,N:"xf:group",A:{class:"",id:"",style:""},E:[{T:1,N:"w2:generator",A:{style:"",id:"list_buildhistory_detail_generator",class:"record_box02"},E:[{T:1,N:"xf:group",A:{class:"item",id:"",style:""},E:[{T:1,N:"xf:group",A:{class:"rec_tit",id:"",style:""},E:[{T:1,N:"w2:textbox",A:{class:"txt_name success",id:"txt_proj_history",label:"",style:"",toolTip:"tooltip",toolTipDisplay:"true",useLocale:"true",tooltipLocaleRef:"lbl_whether_build"}},{T:1,N:"xf:group",A:{class:"recbox"},E:[{T:1,N:"w2:textbox",A:{style:"",id:"txt_build_start_date",label:"",class:"txt_name"}},{T:1,N:"w2:textbox",A:{style:"",id:"txt_build_end_date",label:"",class:"txt_name"}},{T:1,N:"w2:textbox",A:{style:"",id:"txt_history_build_project_name",label:"",class:"txt_name"}}]}]},{T:1,N:"xf:group",A:{class:"rec_link",id:"",style:""},E:[{T:1,N:"w2:anchor",A:{class:"btn_down",id:"history_logfile_url",outerDiv:"false",style:"",href:"","ev:onclick":"scwin.gethistoryfileurl_onclick",toolTip:"tooltip",toolTipDisplay:"true",useLocale:"true",localeRef:"lbl_log_download",tooltipLocaleRef:"lbl_deploy_history_detail_tooltip_history_logfile_url"},E:[{T:1,N:"xf:label"}]}]}]}]}]}]}]},{T:1,N:"xf:group",A:{class:"layer_pop",id:"",style:"display:none;"},E:[{T:1,N:"xf:group",A:{class:"ly_head",id:"",style:""},E:[{T:1,N:"w2:textbox",A:{class:"title",id:"",label:"",style:"",useLocale:"true",localeRef:"lbl_qrcode"}},{T:1,N:"w2:anchor",A:{class:"btn_pop_close",id:"",outerDiv:"false",style:"",useLocale:"true",localeRef:"lbl_close"},E:[{T:1,N:"xf:label"}]}]},{T:1,N:"xf:group",A:{class:"ly_cont",id:"",style:""},E:[{T:1,N:"div",A:{id:"history_qrcode",style:"width: 290px;height:330px;"}}]}]}]}]}]});
