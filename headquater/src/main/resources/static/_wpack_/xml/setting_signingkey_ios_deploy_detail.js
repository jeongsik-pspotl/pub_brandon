/*amd /xml/setting_signingkey_ios_deploy_detail.xml 28474 4820f8dd0f63e7ebd1f3881e8bcd9b276e8c14f1ea65eb32081ebc304643eb8b */
define({declaration:{A:{version:"1.0",encoding:"UTF-8"}},E:[{T:1,N:"html",A:{xmlns:"http://www.w3.org/1999/xhtml","xmlns:ev":"http://www.w3.org/2001/xml-events","xmlns:w2":"http://www.inswave.com/websquare","xmlns:xf":"http://www.w3.org/2002/xforms"},E:[{T:1,N:"head",E:[{T:1,N:"w2:type",E:[{T:3,text:"DEFAULT"}]},{T:1,N:"w2:buildDate"},{T:1,N:"xf:model",E:[{T:1,N:"w2:dataCollection",A:{baseNode:"map"}},{T:1,N:"w2:workflowCollection"}]},{T:1,N:"script",A:{type:"text/javascript",lazy:"false"},E:[{T:4,cdata:function(scopeObj){with(scopeObj){function checkChar(obj){var chrTemp,strTemp=obj.name;if(0<strTemp.length)for(var i=0;i<strTemp.length;i++){if(!(1<=(chrTemp=strTemp.charCodeAt(i))&&chrTemp<=57||65<=chrTemp&&chrTemp<=122))return 1,1;1}}function changeToolTipContentSigningkeyDetail(componentId){switch(setting_ios_select_signingkey_type.getValue()){case"build":common.getLabel("lbl_setting_signingkey_ios_certificate_detail_pkcsFile");return;case"deploy":common.getLabel("lbl_setting_signingkey_ios_deploy_detail_authKey");return}}scwin.checkProvisionFileYn=!1,scwin.checkSigningkeyNameYn=!1,scwin.signingkeyLastCnt="",scwin.onpageload=function(){var key_setting_mode=localStorage.getItem("_key_setting_mode_"),key_platform=localStorage.getItem("_platform_");"detailview"==key_setting_mode?"iOS"==key_platform&&scwin.signingKeyiOSDetailView():(key_setting_mode=common.getLabel("lbl_key_setting_create"),ftp_setting_title.setLabel(key_setting_mode))},scwin.init=function(){for(var buildConfig=[["Profile","certificate","Deploy"]][0],i=0;i<buildConfig.length;i++){var label=buildConfig[i];tabControl1.addTab("tab_"+label,{label:label,closable:!1,tabWidth:"100px"},{wframe:!0,src:"/setting_signingkey_detail.xml"})}},scwin.onpageunload=function(){localStorage.removeItem("_platform_")},scwin.signingKeyiOSDetailView=function(){var key_id=localStorage.getItem("_key_id_"),options={};options.action="/manager/mCert/iOS/search/profile/"+parseInt(key_id),options.mode="asynchronous",options.mediatype="application/json",options.method="GET",options.success=function(e){e=e.responseJSON;null!=e&&"iOS"==e.platform&&($("#mf_wfm_main_setting_signgingkey_tap_contents_tab_Deploy_body_signingkey_setting_ios_signingkey_input_file_path_inputFile").val(e.ios_key_path),setting_ios_issuer_id.setValue(e.ios_issuer_id),setting_ios_key_id.setValue(e.ios_key_id))},options.error=function(e){alert("code:"+request.status+"\nmessage:"+request.responseText+"\n")},$p.ajax(options)},scwin.getDomainByIDView=function(){},scwin.getAdminByIDView=function(){},scwin.select_check_key_name=function(key_name){var data={},key_name=(data.key_name=key_name,{});key_name.action="/manager/mCert/common/search/checkProfileName",key_name.mode="asynchronous",key_name.mediatype="application/json",key_name.requestData=JSON.stringify(data),key_name.method="POST",key_name.success=function(e){var message,data=e.responseJSON;200!==e.responseStatusCode&&201!==e.responseStatusCode||null!=data&&("no"==data[0].keyNameCheck?(message=common.getLabel("lbl_exist_key_cert_name"),alert(message),scwin.checkSigningkeyNameYn=!1):(message=common.getLabel("lbl_can_use_key_cert_name"),alert(message),scwin.checkSigningkeyNameYn=!0))},key_name.error=function(e){500===e.responseStatusCode&&(e=common.getLabel("lbl_can_use_key_cert_name"),alert(e),scwin.checkSigningkeyNameYn=!0)},$p.ajax(key_name)},scwin.select_builder_list=function(){var options={action:"/manager/builderSetting/selectBySelectBoxList",mode:"asynchronous",mediatype:"application/json",method:"GET",success:function(e){var data=e.responseJSON;if(null!=data){var row,e=common.getLabel("lbl_select");for(row in setting_builder_list.addItem("",e),data)setting_builder_list.addItem(data[row].builder_id,data[row].builder_name)}},error:function(e){alert("code:"+request.status+"\nmessage:"+request.responseText+"\n")}};$p.ajax(options)},scwin.select_domain_list=function(){var options={action:"/manager/domain/search/domainList",mode:"asynchronous",mediatype:"application/json",method:"GET",success:function(e){var data=e.responseJSON;if(null!=data){var row,e=common.getLabel("lbl_select");for(row in setting_domain_list.addItem("",e),data)setting_domain_list.addItem(data[row].domain_id,data[row].domain_name)}}};scwin.select_domain_list=function(){var options={action:"/manager/domain/search/domainList",mode:"asynchronous",mediatype:"application/json",method:"GET",success:function(e){var data=e.responseJSON;if(null!=data){var row,e=common.getLabel("lbl_select");for(row in setting_domain_list.addItem("",e),data)setting_domain_list.addItem(data[row].domain_id,data[row].domain_name)}},error:function(e){alert("code:"+request.status+"\nmessage:"+request.responseText+"\n")}};$p.ajax(options)},options.error=function(e){alert("code:"+request.status+"\nmessage:"+request.responseText+"\n")},$p.ajax(options)},scwin.select_admin_list=function(domainID){var options={};options.action="/manager/member/search/userInfoForSelectBox/"+parseInt(domainID),options.mode="asynchronous",options.mediatype="application/json",options.method="GET",options.success=function(e){var data=e.responseJSON;if(null!=data){setting_admin_list.removeAll(!1);var row,e=common.getLabel("lbl_select");for(row in setting_admin_list.addItem("",e),data)setting_admin_list.addItem(data[row].user_id,data[row].user_name)}},options.error=function(e){alert("code:"+request.status+"\nmessage:"+request.responseText+"\n")},$p.ajax(options)},scwin.saveSigningKeySettingData=function(){var signingKeyfile="",debug_profile_path="",release_profile_path="";if(common.isEmptyStr(signingkey_setting_name.getValue()))return message=common.getLabel("lbl_check_key_cert_name"),alert(message),!1;if(!scwin.checkSigningkeyNameYn)return message=common.getLabel("lbl_check_dup_key"),alert(message),!1;if("Android"==setting_select_platform.getValue()){if(checkChar((signingKeyfile=signingkey_setting_android_input_file_path_tmp.dom.fakeinput).files[0]))return message=common.getLabel("lbl_key_form_kor"),alert(message),!1}else if("iOS"==setting_select_platform.getValue())if("build"==(ios_signingkey_type=setting_ios_select_signingkey_type.getValue())){debug_profile_path=signingkey_setting_ios_debug_provisioning_input_file_path.dom.fakeinput,release_profile_path=signingkey_setting_ios_release_provisioning_input_file_path.dom.fakeinput;if(signingKeyfile=signingkey_setting_ios_signingkey_input_file_path.dom.fakeinput,common.checkAllInputText("CHECK_INPUT_TYPE_KOR",signingKeyfile.files[0].name))return message=common.getLabel("lbl_key_form_kor"),alert(message),!1;if(common.checkAllInputText("CHECK_INPUT_TYPE_KOR",debug_profile_path.files[0].name))return message=common.getLabel("lbl_key_form_kor"),alert(message),!1;if(common.checkAllInputText("CHECK_INPUT_TYPE_KOR",release_profile_path.files[0].name))return message=common.getLabel("lbl_key_form_kor"),alert(message),!1}else"deploy"==ios_signingkey_type;var android_signingkey_type,ios_signingkey_type,message=new FormData;message.append("key_name",signingkey_setting_name.getValue()),message.append("platform",setting_select_platform.getValue()),"Android"==setting_select_platform.getValue()?(android_signingkey_type=setting_select_android_signingkey_type.getValue(),signingKeyfile=signingkey_setting_android_input_file_path_tmp.dom.fakeinput,message.append("file",signingKeyfile.files[0]),message.append("key_type",android_signingkey_type),message.append("key_password",setting_android_key_password.getValue()),message.append("key_alias",setting_android_key_alias.getValue()),message.append("store_key_password",setting_android_store_password.getValue()),message.append("builder_id",setting_builder_list.getValue()),scwin.setKeySettingAndroidInsert(message)):(ios_signingkey_type=setting_ios_select_signingkey_type.getValue(),android_signingkey_type=setting_ios_select_release_type.getValue(),signingKeyfile=signingkey_setting_ios_signingkey_input_file_path.dom.fakeinput,debug_profile_path=signingkey_setting_ios_debug_provisioning_input_file_path.dom.fakeinput,release_profile_path=signingkey_setting_ios_release_provisioning_input_file_path.dom.fakeinput,message.append("key_type",ios_signingkey_type),message.append("key_password",setting_ios_store_password.getValue()),message.append("builder_id",setting_builder_list.getValue()),"build"==ios_signingkey_type?(ios_signingkey_type=setting_ios_unlock_keychain_password.getValue(),message.append("keyfile",signingKeyfile.files[0]),message.append("release_type",android_signingkey_type),message.append("debugprofile",debug_profile_path.files[0]),message.append("releaseprofile",release_profile_path.files[0]),message.append("unlock_keychain_password",ios_signingkey_type),scwin.setKeySettingiOSInsert(message)):(message.append("keyfile",signingKeyfile.files[0]),message.append("ios_issuer_id",setting_ios_issuer_id.getValue()),message.append("ios_key_id",setting_ios_key_id.getValue()),scwin.setKeySettingDeployiOSInsert(message)))},scwin.setKeySettingAndroidInsert=function(formData){$.ajax({url:"/manager/mCert/android/create",type:"POST",enctype:"multipart/form-data",processData:!1,contentType:!1,data:formData,dataType:"json",cache:!1,success:function(r,status){"success"===status&&(scwin.signingkeyLastCnt=r[0].signingkeyCnt)},error:function(request,status,error){alert("code:"+request.status+"\nmessage:"+request.responseText+"\nerror:"+error)}})},scwin.setKeySettingiOSInsert=function(formData){$.ajax({url:"/manager/mCert/iOS/create",type:"POST",enctype:"multipart/form-data",processData:!1,contentType:!1,data:formData,dataType:"json",cache:!1,success:function(r,status){"success"===status&&(scwin.signingkeyLastCnt=r[0].signingkeyCnt)},error:function(request,status,error){alert("code:"+request.status+"\nmessage:"+request.responseText+"\nerror:"+error)}})},scwin.setKeySettingDeployiOSInsert=function(formData){$.ajax({url:"/manager/mCert/iOS/deploy/create",type:"POST",enctype:"multipart/form-data",processData:!1,contentType:!1,data:formData,dataType:"json",cache:!1,success:function(r,status){"success"===status&&(scwin.signingkeyLastCnt=r[0].signingkeyCnt)},error:function(request,status,error){alert("code:"+request.status+"\nmessage:"+request.responseText+"\nerror:"+error)}})},scwin.btn_create_signingkey_setting_onclick=function(e){scwin.saveSigningKeySettingData()},scwin.setting_select_platform_onchange=function(e){var platform=setting_select_platform.getValue();"Android"==platform?(gal_body_android.show(),gal_body_ios.hide()):"iOS"==platform&&(gal_body_android.hide(),gal_body_ios.show())},scwin.setting_select_ios_profile_onchange=function(e){var label,signingkey_type=setting_ios_select_signingkey_type.getValue();"build"==signingkey_type?(ios_debug_profile_group.show(),ios_release_profile_group.show(),ios_signingkey_group.show(),ios_signingkey_password_group.show(),ios_signingkey_unlock_keychain_password_group.hide(),ios_deploy_issuer_group.hide(),ios_deploy_key_id_group.hide(),label=common.getLabel("lbl_apple_dev_cert_file"),signingkey_setting_ios_signingkey_input_file_path_text.setLabel(label)):"deploy"==signingkey_type&&(ios_debug_profile_group.hide(),ios_release_profile_group.hide(),ios_signingkey_password_group.hide(),ios_signingkey_unlock_keychain_password_group.hide(),ios_signingkey_group.show(),ios_deploy_issuer_group.show(),ios_deploy_key_id_group.show(),label=common.getLabel("lbl_app_store_connect_api_key"),signingkey_setting_ios_signingkey_input_file_path_text.setLabel(label))},scwin.setting_select_android_build_type_onchange=function(e){var pwd,store,android_signingkey_type=setting_select_android_signingkey_type.getValue();"build"==android_signingkey_type?(android_key_type_build_1.show(),android_key_type_build_2.show(),android_key_type_build_3.show(),store=common.getLabel("lbl_slbl_keystore_fileetting_signingkey_ios_deploy_detail_keyFile"),pwd=common.getLabel("lbl_store_password"),signingkey_setting_android_input_file_path_text.setLabel(store),setting_android_store_password_text.setLabel(pwd)):"deploy"==android_signingkey_type&&(android_key_type_build_1.hide(),android_key_type_build_2.hide(),android_key_type_build_3.hide(),store=common.getLabel("lbl_json_key_file"),signingkey_setting_android_input_file_path_text.setLabel(store))},scwin.setting_key_name_check_onclick=function(){var message,key_name=signingkey_setting_name.getValue();if(common.isEmptyStr(key_name))return message=common.getLabel("lbl_check_key_name"),alert(message),!1;scwin.select_check_key_name(key_name)},scwin.setting_select_ios_export_profile_change=function(){var release_profile_val=setting_ios_select_release_type.getValue();"app-store"==release_profile_val||"enterprise"==release_profile_val},scwin.webSocketCallback=function(obj){switch(obj.MsgType){case"BIN_FILE_PROFILE_TEMPLATE_SEND_INFO_FROM_HEADQUATER":case"BIN_FILE_IOS_KEY_FILE_TEMPLATE_SEND_INFO_FROM_HEADQUATER":case"BIN_FILE_IOS_KEY_FILE_TEMPLATE_DEPLOY_SEND_INFO_FROM_HEADQUATER":var message=common.getLabel("lbl_key_setting_complete");alert(message),$p.parent().wfm_main.setUserData("settingsData","signingkey"),$p.parent().wfm_main.setSrc("/xml/settings.xml")}},scwin.setBuilderKeyFileCreateStatus=function(msg){var data={},msg=(data.signingkey_id=scwin.signingkeyLastCnt,data.signingkey_path=msg.filePath,{});msg.action="/api/signingkeysetting/updatekeyfile",msg.mode="asynchronous",msg.mediatype="application/json",msg.requestData=JSON.stringify(data),msg.method="PUT",msg.success=function(e){var data=e.responseJSON;200!==e.responseStatusCode&&201!==e.responseStatusCode||null==data||($p.parent().wfm_main.setUserData("settingsData","signingkey"),$p.parent().wfm_main.setSrc("/xml/settings.xml"))},msg.error=function(e){alert("code:"+e.responseStatusCode+"\nmessage:"+e.responseText+"\n")},$p.ajax(msg)},scwin.setBuilderiOSKeyFileCreateStatus=function(msg){var data={},msg=(data.key_id=scwin.signingkeyLastCnt,data.ios_key_path=msg.keyfilePath,data.ios_debug_profile_path=msg.debugProfilePath,data.ios_release_profile_path=msg.releaseProfilePath,{});msg.action="/api/keysetting/ios/updatekeyfile",msg.mode="asynchronous",msg.mediatype="application/json",msg.requestData=JSON.stringify(data),msg.method="PUT",msg.success=function(e){var data=e.responseJSON;200!==e.responseStatusCode&&201!==e.responseStatusCode||null==data||($p.parent().wfm_main.setUserData("settingsData","signingkey"),$p.parent().wfm_main.setSrc("/xml/settings.xml"))},msg.error=function(e){alert("code:"+e.responseStatusCode+"\nmessage:"+e.responseText+"\n")},$p.ajax(msg)},scwin.setBuilderiOSDeployKeyFileCreateStatus=function(msg){var data={},msg=(data.key_id=scwin.signingkeyLastCnt,data.ios_key_path=msg.keyfilePath,{});msg.action="/api/keysetting/ios/deploy/updatekeyfile",msg.mode="asynchronous",msg.mediatype="application/json",msg.requestData=JSON.stringify(data),msg.method="PUT",msg.success=function(e){var data=e.responseJSON;200!==e.responseStatusCode&&201!==e.responseStatusCode||null==data||($p.parent().wfm_main.setUserData("settingsData","signingkey"),$p.parent().wfm_main.setSrc("/xml/settings.xml"))},msg.error=function(e){alert("code:"+e.responseStatusCode+"\nmessage:"+e.responseText+"\n")},$p.ajax(msg)},scwin.setting_select_domain_onchange=function(e){var message,domainID=setting_domain_list.getValue();""==domainID?(setting_admin_list.removeAll(!1),message=common.getLabel("lbl_select"),setting_admin_list.addItem("",message)):scwin.select_admin_list(domainID)}}}}]}]},{T:1,N:"body",A:{"ev:onpageload":"scwin.onpageload","ev:onpageunload":"scwin.onpageunload"},E:[{T:1,N:"xf:group",A:{class:"gallery_box",id:"",style:""},E:[{T:1,N:"xf:group",A:{class:"dfbox",id:"",style:""},E:[{T:1,N:"xf:group",A:{class:"fl"},E:[{T:1,N:"w2:textbox",A:{class:"gal_tit fl",id:"ftp_setting_title",label:"",style:"",useLocale:"true",localeRef:"lbl_key_cert_regist_setting"}}]}]},{T:1,N:"xf:group",A:{class:"gal_body type2 mt30",id:"gal_body_ios",style:""},E:[{T:1,N:"xf:group",A:{id:"",style:"",class:"form_wrap"},E:[{T:1,N:"xf:group",A:{id:"",style:"",class:"",tagname:"ul"},E:[{T:1,N:"xf:group",A:{id:"ios_signingkey_group",style:"",class:"tooltip_box",tagname:"li"},E:[{T:1,N:"xf:group",A:{class:"ipt_box",id:"",style:""},E:[{T:1,N:"w2:textbox",A:{id:"signingkey_setting_ios_signingkey_input_file_path_text",style:"",class:"form_name",label:"",useLocale:"true",localeRef:"lbl_app_store_connect_api_key"}},{T:1,N:"w2:anchor",A:{class:"ico_tip",id:"",outerDiv:"false",style:"",toolTip:"tooltip",toolTipDisplay:"true",tooltipLocaleRef:"lbl_setting_signingkey_ios_deploy_detail_authKey",tooltipFormatter:"",useLocale:"true"},E:[{T:1,N:"xf:label"}]}]},{T:1,N:"xf:group",A:{class:"ipt_box",id:"",style:""},E:[{T:1,N:"w2:upload",A:{inputStyle:"position:absolute;vertical-align:middle;word-wrap:break-word",type:"",id:"signingkey_setting_ios_signingkey_input_file_path",style:"position: relative;width: 250px;height: 23px;",imageStyle:"position:absolute;vertical-align:middle;word-wrap:break-word",disabled:"false",class:""}}]}]},{T:1,N:"xf:group",A:{id:"ios_deploy_issuer_group",style:"",class:"tooltip_box",tagname:"li"},E:[{T:1,N:"xf:group",A:{class:"ipt_box",id:"",style:""},E:[{T:1,N:"w2:textbox",A:{id:"setting_ios_issuer_id_text",style:"",class:"form_name",label:"",useLocale:"true",localeRef:"lbl_setting_signingkey_ios_deploy_detail_id"}},{T:1,N:"w2:anchor",A:{class:"ico_tip",id:"",outerDiv:"false",style:"",toolTip:"tooltip",toolTipDisplay:"true",tooltipLocaleRef:"lbl_setting_signingkey_ios_deploy_detail_discrimination",useLocale:"true"},E:[{T:1,N:"xf:label"}]}]},{T:1,N:"xf:group",A:{id:"",style:"",class:"ipt_box"},E:[{T:1,N:"xf:input",A:{id:"setting_ios_issuer_id",style:"",adjustMaxLength:"false"}}]}]},{T:1,N:"xf:group",A:{id:"ios_deploy_key_id_group",style:"",class:"tooltip_box",tagname:"li"},E:[{T:1,N:"xf:group",A:{class:"ipt_box",id:"",style:""},E:[{T:1,N:"w2:textbox",A:{id:"setting_ios_key_id_text",style:"",class:"form_name",label:"",useLocale:"true",localeRef:"lbl_key_id"}},{T:1,N:"w2:anchor",A:{class:"ico_tip",id:"",outerDiv:"false",style:"",toolTip:"tooltip",tooltipLocaleRef:"lbl_setting_signingkey_ios_deploy_detail_tooltip_keyId",toolTipDisplay:"true",useLocale:"true"},E:[{T:1,N:"xf:label"}]}]},{T:1,N:"xf:group",A:{id:"",style:"",class:"ipt_box"},E:[{T:1,N:"xf:input",A:{id:"setting_ios_key_id",style:"",adjustMaxLength:"false"}}]}]}]}]}]}]}]}]}]});
