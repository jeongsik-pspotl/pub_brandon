/*amd /ui/comn/index.xml 39441 8213f6b0c3ed847e876da7dc88d4c32ad1a8b1e2b24cd4ca3eaacbb11d8ad2dd */
define({declaration:{A:{version:'1.0',encoding:'UTF-8'}},E:[{T:7,N:'xml-stylesheet',instruction:'href="/cm/css/contents.css" type="text/css"'},{T:7,N:'xml-stylesheet',instruction:'href="/cm/css/base.css" type="text/css"'},{T:1,N:'html',A:{xmlns:'http://www.w3.org/1999/xhtml','xmlns:ev':'http://www.w3.org/2001/xml-events','xmlns:w2':'http://www.inswave.com/websquare','xmlns:xf':'http://www.w3.org/2002/xforms'},E:[{T:1,N:'head',A:{},E:[{T:1,N:'w2:type',E:[{T:3,text:'COMPONENT'}]},{T:1,N:'w2:buildDate'},{T:1,N:'w2:MSA'},{T:1,N:'xf:model',E:[{T:1,N:'w2:dataCollection',A:{baseNode:'map'},E:[{T:1,N:'w2:dataList',A:{id:'__access_info__',saveRemovedData:'true'},E:[{T:1,N:'w2:columnInfo',E:[{T:1,N:'w2:column',A:{id:'access_token',name:'accessToken',dataType:'text'}},{T:1,N:'w2:column',A:{id:'refresh_token',name:'refreshToken',dataType:'text'}},{T:1,N:'w2:column',A:{id:'jti',name:'jti',dataType:'text'}},{T:1,N:'w2:column',A:{id:'scope',name:'accessToken',dataType:'text'}}]}]},{T:1,N:'w2:dataList',A:{id:'__account_info__',saveRemovedData:'true'},E:[{T:1,N:'w2:columnInfo',E:[{T:1,N:'w2:column',A:{id:'id',name:'id',dataType:'text'}},{T:1,N:'w2:column',A:{id:'user_login_id',name:'user_login_id',dataType:'text'}},{T:1,N:'w2:column',A:{id:'email',name:'email',dataType:'text'}},{T:1,N:'w2:column',A:{id:'user_role',name:'user_role',dataType:'text'}},{T:1,N:'w2:column',A:{id:'user_name',name:'user_name',dataType:'text'}},{T:1,N:'w2:column',A:{id:'domain_id',name:'domain_id',dataType:'text'}},{T:1,N:'w2:column',A:{id:'domain_name',name:'domain_name',dataType:'text'}},{T:1,N:'w2:column',A:{id:'create_date',name:'create_date',dataType:'text'}},{T:1,N:'w2:column',A:{id:'update_date',name:'update_date',dataType:'text'}},{T:1,N:'w2:column',A:{id:'last_login_date',name:'last_login_date',dataType:'text'}}]}]},{T:1,N:'w2:dataList',A:{id:'__workspace_data__',saveRemovedData:'true'},E:[{T:1,N:'w2:columnInfo',E:[{T:1,N:'w2:column',A:{id:'id',name:'id',dataType:'text'}},{T:1,N:'w2:column',A:{id:'member_id',name:'member_id',dataType:'text'}},{T:1,N:'w2:column',A:{id:'workspace_name',name:'workspace_name',dataType:'text'}},{T:1,N:'w2:column',A:{id:'workspace_group_role_id',name:'workspace_group_role_id',dataType:'text'}},{T:1,N:'w2:column',A:{id:'status',name:'status',dataType:'text'}},{T:1,N:'w2:column',A:{id:'delete_yn',name:'delete_yn',dataType:'text'}},{T:1,N:'w2:column',A:{id:'favorite_flag',name:'favorite_flag',dataType:'text'}},{T:1,N:'w2:column',A:{id:'workspace_path',name:'workspace_path',dataType:'text'}}]}]},{T:1,N:'w2:dataList',A:{id:'__buildproject_data__',saveRemovedData:'true'},E:[{T:1,N:'w2:columnInfo',E:[{T:1,N:'w2:column',A:{id:'project_id',name:'project_id',dataType:'text'}},{T:1,N:'w2:column',A:{id:'workspace_name',name:'workspace_name',dataType:'text'}},{T:1,N:'w2:column',A:{id:'workspace_id',name:'workspace_id',dataType:'text'}},{T:1,N:'w2:column',A:{id:'project_name',name:'project_name',dataType:'text'}},{T:1,N:'w2:column',A:{id:'product_type',name:'product_type',dataType:'text'}},{T:1,N:'w2:column',A:{id:'platform',name:'platform',dataType:'text'}},{T:1,N:'w2:column',A:{id:'description',name:'description',dataType:'text'}},{T:1,N:'w2:column',A:{id:'template_version',name:'template_version',dataType:'text'}},{T:1,N:'w2:column',A:{id:'project_dir_path',name:'project_dir_path',dataType:'text'}},{T:1,N:'w2:column',A:{id:'platform_language',name:'platform_language',dataType:'text'}},{T:1,N:'w2:column',A:{id:'created_date',name:'created_date',dataType:'text'}},{T:1,N:'w2:column',A:{id:'updated_date',name:'updated_date',dataType:'text'}},{T:1,N:'w2:column',A:{id:'read_yn',name:'read_yn',dataType:'text'}},{T:1,N:'w2:column',A:{id:'update_yn',name:'update_yn',dataType:'text'}},{T:1,N:'w2:column',A:{id:'delete_yn',name:'delete_yn',dataType:'text'}},{T:1,N:'w2:column',A:{id:'build_yn',name:'build_yn',dataType:'text'}},{T:1,N:'w2:column',A:{id:'deploy_yn',name:'deploy_yn',dataType:'text'}},{T:1,N:'w2:column',A:{id:'export_yn',name:'export_yn',dataType:'text'}}]}]},{T:1,N:'w2:dataList',A:{id:'__Sample_data__',saveRemovedData:'true'},E:[{T:1,N:'w2:columnInfo',E:[{T:1,N:'w2:column',A:{id:'workspace_id',name:'workspace_id',dataType:'text'}},{T:1,N:'w2:column',A:{id:'favorite',name:'favorite',dataType:'text'}},{T:1,N:'w2:column',A:{id:'project_name',name:'project_name',dataType:'text'}},{T:1,N:'w2:column',A:{id:'platform',name:'platform',dataType:'text'}},{T:1,N:'w2:column',A:{id:'status',name:'status',dataType:'text'}},{T:1,N:'w2:column',A:{id:'description',name:'description',dataType:'text'}},{T:1,N:'w2:column',A:{id:'template_version',name:'template_version',dataType:'text'}},{T:1,N:'w2:column',A:{id:'created_date',name:'created_date',dataType:'text'}},{T:1,N:'w2:column',A:{id:'updated_date',name:'updated_date',dataType:'text'}}]}]},{T:1,N:'w2:dataList',A:{id:'__buildhistory_data__',saveRemovedData:'true'},E:[{T:1,N:'w2:columnInfo',E:[{T:1,N:'w2:column',A:{id:'project_history_id',name:'project_history_id',dataType:'text'}},{T:1,N:'w2:column',A:{id:'project_id',name:'project_id',dataType:'text'}},{T:1,N:'w2:column',A:{id:'project_name',name:'project_name',dataType:'text'}},{T:1,N:'w2:column',A:{id:'platform',name:'platform',dataType:'text'}},{T:1,N:'w2:column',A:{id:'status',name:'status',dataType:'text'}},{T:1,N:'w2:column',A:{id:'status_log',name:'status_log',dataType:'text'}},{T:1,N:'w2:column',A:{id:'log_path',name:'log_path',dataType:'text'}},{T:1,N:'w2:column',A:{id:'result',name:'result',dataType:'text'}},{T:1,N:'w2:column',A:{id:'platform_build_file_path',name:'platform_build_file_path',dataType:'text'}},{T:1,N:'w2:column',A:{id:'qrcode',name:'qrcode',dataType:'text'}},{T:1,N:'w2:column',A:{id:'history_started_date',name:'history_started_date',dataType:'text'}},{T:1,N:'w2:column',A:{id:'history_ended_date',name:'history_ended_date',dataType:'text'}}]}]},{T:1,N:'w2:dataList',A:{id:'__deployhistory_data__',saveRemovedData:'true'},E:[{T:1,N:'w2:columnInfo',E:[{T:1,N:'w2:column',A:{id:'deploy_history_id',name:'deploy_history_id',dataType:'text'}},{T:1,N:'w2:column',A:{id:'project_id',name:'project_id',dataType:'text'}},{T:1,N:'w2:column',A:{id:'deploy_id',name:'deploy_id',dataType:'text'}},{T:1,N:'w2:column',A:{id:'status_log',name:'status_log',dataType:'text'}},{T:1,N:'w2:column',A:{id:'log_path',name:'log_path',dataType:'text'}},{T:1,N:'w2:column',A:{id:'logfile_name',name:'logfile_name',dataType:'text'}},{T:1,N:'w2:column',A:{id:'result',name:'result',dataType:'text'}},{T:1,N:'w2:column',A:{id:'deploy_start_date',name:'deploy_start_date',dataType:'text'}},{T:1,N:'w2:column',A:{id:'deploy_end_date',name:'deploy_end_date',dataType:'text'}}]}]},{T:1,N:'w2:dataList',A:{id:'__buildaction_data__',saveRemovedData:'true'},E:[{T:1,N:'w2:columnInfo',E:[{T:1,N:'w2:column',A:{id:'workspace_pkid',name:'workspace_pkid',dataType:'text'}},{T:1,N:'w2:column',A:{id:'project_pkid',name:'project_pkid',dataType:'text'}},{T:1,N:'w2:column',A:{id:'projectName',name:'projectName',dataType:'text'}},{T:1,N:'w2:column',A:{id:'platform',name:'platform',dataType:'text'}},{T:1,N:'w2:column',A:{id:'product_type',name:'product_type',dataType:'text'}}]}]},{T:1,N:'w2:dataList',A:{id:'__deployaction_data__',saveRemovedData:'true'},E:[{T:1,N:'w2:columnInfo',E:[{T:1,N:'w2:column',A:{id:'workspace_pkid',name:'workspace_pkid',dataType:'text'}},{T:1,N:'w2:column',A:{id:'project_pkid',name:'project_pkid',dataType:'text'}},{T:1,N:'w2:column',A:{id:'project_history_id',name:'project_history_id',dataType:'text'}},{T:1,N:'w2:column',A:{id:'projectName',name:'projectName',dataType:'text'}},{T:1,N:'w2:column',A:{id:'platform',name:'platform',dataType:'text'}}]}]},{T:1,N:'w2:dataList',A:{id:'__deploytask_data__',saveRemovedData:'true'},E:[{T:1,N:'w2:columnInfo',E:[{T:1,N:'w2:column',A:{id:'workspace_pkid',name:'workspace_pkid',dataType:'text'}},{T:1,N:'w2:column',A:{id:'project_pkid',name:'project_pkid',dataType:'text'}},{T:1,N:'w2:column',A:{id:'project_history_id',name:'project_history_id',dataType:'text'}},{T:1,N:'w2:column',A:{id:'projectName',name:'projectName',dataType:'text'}},{T:1,N:'w2:column',A:{id:'platform',name:'platform',dataType:'text'}}]}]},{T:1,N:'w2:linkedDataList',A:{id:'__favorite_workspace__',bind:'__workspace_data__'},E:[{T:1,N:'w2:condition',A:{type:'filter'},E:[{T:4,cdata:'favorite == true'}]},{T:1,N:'w2:condition',A:{type:'sort'}}]},{T:1,N:'w2:dataList',A:{baseNode:'list',repeatNode:'map',id:'dlt_side_user_List',saveRemovedData:'true'},E:[{T:1,N:'w2:columnInfo',E:[{T:1,N:'w2:column',A:{id:'text_label',name:'name1',dataType:'text'}},{T:1,N:'w2:column',A:{id:'menu_key',name:'name2',dataType:'text'}},{T:1,N:'w2:column',A:{id:'depth',name:'name3',dataType:'text'}},{T:1,N:'w2:column',A:{id:'icon',name:'name4',dataType:'text'}},{T:1,N:'w2:column',A:{id:'url',name:'name5',dataType:'text'}}]},{T:1,N:'w2:data',A:{use:'true'}}]}]},{T:1,N:'w2:workflowCollection'}]},{T:1,N:'w2:layoutInfo'},{T:1,N:'w2:publicInfo',A:{method:''}},{T:1,N:'script',A:{lazy:'false',type:'text/javascript'},E:[{T:4,cdata:function(scopeObj){with(scopeObj){
                        /* 기존 localStorage 변환 */
                        // /ui/works/workspace.xml
                        /// scwin.import_project_onclick
                        scwin.__member_id__ = "";
                        scwin.__workspace_name__ = "";
                        scwin.__sample_project_yn__ = "";
                        /// scwin.grp_list_buildproj_onclick, scwin.btn_setting_onclick
                        scwin.buildPlatform = "";
                        scwin.buildProjectId = "";
                        scwin.workspaceId = "";
                        scwin.buildProjectName = "";
                        scwin.buildProjecPkId = "";
                        scwin.__workspace_name__ = "";
                        scwin.__update_yn__ = "";
                        /// scwin.btn_history_onclick
                        scwin.historyPlatform = "";
                        scwin.historyProjectName = "";
                        scwin.historyProjectId = "";

                        // /ui/build/build.xml
                        /// scwin.onpageload
                        scwin._buildStatusFlag_ = "";
                        scwin._buildFromProjSetting_ = "";

                        scwin.onpageload = function () {
                            common.setScopeObj(scwin);
                            /* 상단 좌측 메뉴 클릭시 */
                            $(".btn_toggle_menu").click(function () {
                                $(".wrap").toggleClass("show_menu");
                                $(".btn_toggle_menu").toggleClass("on");
                                $(".dim").toggleClass("on");
                            });

                            /* theme 클릭시 */
                            $(".btn_theme").click(function () {
                                $(".wrap").toggleClass("theme2");
                                //$(".btn_theme").toggleClass("on");
                            });

                            scwin.getUserInfo();

                            setInterval(function () {
                                ws.send(JSON.stringify({MsgType: "HV_MSG_HEADQUATER_SESSID_INFO", sessId: "head_main"}));
                            }, 30000);
                        };

                        /* admin(관리자) 클릭시 */
                        scwin.anchor1_onclick = function (e) {
                            if (anchor1.hasClass("on")) {
                                anchor1.removeClass("on");
                                layer03.removeClass("on");
                            } else {
                                anchor1.addClass("on");
                                layer03.addClass("on");
                            }
                        };

                        /* 사용자 정보 Get */
                        scwin.getUserInfo = async function () {
                            const url = common.uri.userInfo;
                            const method = "GET";
                            const headers = {"Content-Type": "application/json"};
                            const response = await common.http.fetchGet(url, method, headers, {});
                            const data = await response.json();

                            if (response.status >= 200 && response.status < 300) {
                                let loginData = {};
                                loginData.build_yn = data.build_yn;
                                loginData.created_date = data.created_date;
                                loginData.last_login_date = data.last_login_date;
                                loginData.user_name = data.user_name;
                                loginData.user_role = data.user_role;
                                loginData.updated_date = data.updated_date;
                                loginData.domain_id = data.domain_id;
                                loginData.domain_name = data.domain_name;
                                loginData.role_id = data.role_id;
                                loginData.user_login_id = data.user_login_id;

                                const g_user_role = data.user_role;
                                scwin.tw_menu_nodeListSettingfunc(g_user_role);

                                __account_info__.setJSON([loginData]);

                                //workspace data 호출
                                scwin.getWorkspaceInfo();
                                //websocket 호출
                                scwin.createWebsocket();
                                //build project data 호출
                                scwin.getBuildProjectInfo();
                                //build history data 호출
                                scwin.getBuildHistoryInfo();

                                return true;
                            }
                        };

                        /* menu 테이블에서, user_role (USER, ADMIN, SUPERADMIN)과 PROFILES에 따라서, 해당되는 메뉴를 가져온다. */
                        scwin.tw_menu_nodeListSettingfunc = async function (user_role) {
                            const url = common.uri.menuList;
                            const method = "POST";
                            const headers = {"Content-Type": "application/json; charset=UTF-8"};
                            const body = {
                                "menu_role_type": user_role,
                                "menu_profile_type": g_config.PROFILES,
                                "menu_lang_type": common.getLocale()
                            };

                            await common.http.fetch(url, method, headers, body)
                                .then(res => {
                                    scwin.menuSetting(res);
                                });
                        };

                        scwin.menuSetting = function (menuData) {
                            dlt_side_user_List.removeAll();
                            dlt_side_user_List.setJSON(menuData, true);

                            let submenu_index = 0;
                            for (let i = 0; i < dlt_side_user_List.getDataLength(); i++) {
                                const menu_data = dlt_side_user_List.getRowData(i);
                                const label_data = menu_data[0];

                                if (menu_data[2] === 1) {
                                    gen_menu.insertChild();
                                    gen_menu.getChild(gen_menu.getLength() - 1, "menu_label").setValue(label_data);
                                    submenu_index = 0;
                                } else {
                                    const current_gen_menu_index = gen_menu.getLength() - 1;
                                    const submenu_label_id = "gen_menu_" + current_gen_menu_index + "_submenu_label";
                                    const gen_submenu = gen_menu.getChild(current_gen_menu_index, "gen_submenu");
                                    gen_submenu.insertChild();
                                    gen_submenu.getChild(submenu_index, submenu_label_id).setValue(label_data);
                                    submenu_index++;
                                }
                            }

                            /* snb 메뉴 클릭시 */
                            $('.sidebox .side_item a').click(function () {
                                if ($(this).parent().hasClass('on') == false) {
                                    $(this).parent().addClass("on").siblings().removeClass("on");
                                }

                                scwin.add_tab(null, this);
                            });
                        };

                        scwin.add_tab = async function (tab_id_input, _this, dataObj) {
                            const tab_id = !!_this ? _this.getInnerHTML() : tab_id_input;
                            const tab_opt = {
                                'label': tab_id,
                                'openAction': 'exist'
                            }
                            let tab_src = '';

                            switch (tab_id) {
                                case "Workspace":
                                    tab_src = '/ui/works/workspace.xml'
                                    break;
                                case "Project Add":
                                    tab_src = '/ui/works/project_add.xml'
                                    break;
                                case "Project Setting":
                                    tab_src = '/ui/works/project_setting.xml'
                                    break;
                                case "Build History":
                                    tab_src = '/ui/history/history_list.xml'
                                    break;
                                case "Deploy History":
                                    tab_src = '/ui/history/deploy_history_list.xml'
                                    break;
                                case "Build":
                                    tab_src = '/ui/build/build.xml'
                                    break;
                                case "Builder":
                                    tab_src = '/ui/settings/setting_branch_list.xml'
                                    break;
                                case "VCS":
                                    tab_src = '/ui/settings/setting_vcs_list.xml'
                                    break;
                                case "FTP Server":
                                    tab_src = '/ui/settings/setting_ftp_list.xml'
                                    break;
                                case "인증서":
                                    tab_src = '/ui/settings/setting_signingkey_list.xml'
                                    break;
                                case "Domain":
                                    tab_src = '/ui/manager/userManager_domain_list.xml'
                                    break;
                                case "Workspace 관리":
                                    tab_src = '/ui/manager/userManager_workspace_role_detail.xml'
                                    break;
                                case "권한관리":
                                    tab_src = '/ui/manager/userManager_user_role_detail.xml'
                                    break;
                                case "사용자 목록":
                                    tab_src = '/ui/manager/userManager_admin_list.xml'
                                    break;
                                default:
                                    break;
                            }

                            const tab_cont = {
                                'src': tab_src,
                                'wframe': true,
                                'scope': true,
                                'dataObject': {
                                    'type': 'json',
                                    'name': 'tabParam',
                                    'data': dataObj ? dataObj : null
                                }
                            }

                            if (tab_src != '') {
                                await tabc_layout.addTab(tab_id, tab_opt, tab_cont);
                                const tab_index = tabc_layout.getTabIndex(tab_id);
                                tabc_layout.setSelectedTabIndex(tab_index);
                            }
                        };

                        scwin.getWorkspaceInfo = async function () {
                            const url = common.uri.getWorkspaceInfo;
                            const method = "GET";
                            const headers = {"Content-Type": "application/json"}

                            const response = await common.http.fetchGet(url, method, headers, {});
                            const data = await response.json();

                            if (response.status >= 200 && response.status < 300) {
                                let workspace = [];

                                for (const row in data) {
                                    let temp = {};

                                    temp["workspace_name"] = data[row].workspace_name;
                                    temp["id"] = data[row].workspace_id;
                                    temp["member_id"] = data[row].member_id;
                                    temp["favorite_flag"] = data[row].favorite_flag;
                                    temp["delete_yn"] = data[row].delete_yn;

                                    temp["workspace_group_role_id"] = !!data[row].workspace_group_role_id ? data[row].workspace_group_role_id : "";

                                    workspace.push(temp);
                                }
                                __workspace_data__.removeAll();
                                let distinct = common.unique(workspace, 'id');
                                __workspace_data__.setJSON(distinct, true);
                            } else {
                                common.win.alert("code:" + request.status + "\n" + "message:" + request.responseText + "\n");
                            }
                        };

                        // websocket 연결 function
                        scwin.createWebsocket = function () {
                            if (typeof ws !== "undefined") {
                                ws = null;
                            }

                            try {
                                ws = new WebSocket(g_config.WEBSOCKETSERVER_URL + "/whivebranch");

                                ws.onopen = () => {
                                    // 메시지 타입을 설정 해서 넣어두기 msgType 명과 전송할 파라미터 처리 준비
                                    const userData = __account_info__.getRowJSON(0);
                                    const name = userData.user_name + "\n" + userData.domain_name;
                                    const member_role = userData.user_role;
                                    const user_login_id = userData.user_login_id;

                                    // 유저 이름 처리
                                    btnUserSelect.setValue(name);

                                    ws.send(JSON.stringify({
                                        MsgType: "HV_MSG_USER_LOGIN_SESSION_INFO",
                                        sessType: "HEADQUATER",
                                        name: name,
                                        member_role: member_role,
                                        userId: user_login_id
                                    }));
                                    ws.onmessage = (ev) => {
                                        if (ev.data instanceof Blob) {
                                            function getStringUTF8(dataview, offset, length) {
                                                let s = '';
                                                for (let i = 0, c; i < length;) {
                                                    c = dataview.getUint8(offset + i++); // 해당 구간 에러
                                                    s += String.fromCharCode(
                                                        c > 0xdf && c < 0xf0 && i < length - 1
                                                            ? (c & 0xf) << 12 | (dataview.getUint8(offset + i++) & 0x3f) << 6
                                                            | dataview.getUint8(offset + i++) & 0x3f
                                                            : c > 0x7f && i < length
                                                                ? (c & 0x1f) << 6 | dataview.getUint8(offset + i++) & 0x3f
                                                                : c
                                                    );
                                                }
                                                return s;
                                            }

                                            let reader = new FileReader();
                                            reader.addEventListener("loadend", function () {
                                                /// Parse binary
                                                let dataView = new DataView(reader.result);

                                                let offset = 0;
                                                let DEFAULT_READ_BYTES = Uint32Array.BYTES_PER_ELEMENT;

                                                let adminIdLength = dataView.getInt32(offset);
                                                offset = DEFAULT_READ_BYTES;

                                                let adminID = getStringUTF8(dataView, offset, adminIdLength);
                                                offset += adminIdLength;

                                                let hqKeyLength = dataView.getInt32(offset);
                                                offset += DEFAULT_READ_BYTES;

                                                let hqKey = getStringUTF8(dataView, offset, hqKeyLength);
                                                offset += hqKeyLength;

                                                let binTypeLength = dataView.getInt32(offset);
                                                offset += DEFAULT_READ_BYTES;

                                                let binType = getStringUTF8(dataView, offset, binTypeLength);
                                                offset += binTypeLength;

                                                // binType 분기 처리
                                                common.message.binTypeOnMessage(binType, ev.data);

                                                let fileNameLength = dataView.getInt32(offset);
                                                offset += DEFAULT_READ_BYTES;

                                                let fileName = getStringUTF8(dataView, offset, fileNameLength);
                                                offset += fileNameLength;

                                                let dataLength = dataView.getInt32(offset);
                                                offset += DEFAULT_READ_BYTES;

                                                let a = null,
                                                    pureData = null,
                                                    dataBlob = null,
                                                    downloadURL = null;

                                                if (common.util.endsWith(fileName, 'txt')) {
                                                    pureData = getStringUTF8(dataView, offset, dataLength);
                                                    common.http.fileDownloadWithBlob(pureData, fileName, {type: 'text/plain; charset=utf-8;'});
                                                } else if (common.util.endsWith(fileName, 'apk')) {
                                                    pureData = getStringUTF8(dataView, offset, dataLength);
                                                    common.http.fileDownloadWithBlob(pureData, fileName, {type: 'binary mime-type'});
                                                } else if (common.util.endsWith(fileName, 'ipa')) {
                                                    pureData = getStringUTF8(dataView, offset, dataLength);
                                                    common.http.fileDownloadWithBlob(pureData, fileName, {type: 'binary mime-type'});
                                                } else {
                                                    let message = common.getLabel("lbl_warn_extension");
                                                    common.win.alert(message);
                                                }
                                            });
                                            reader.readAsArrayBuffer(ev.data);
                                        } else {
                                            common.message.onMessage(ev);
                                        }
                                    };
                                };

                                ws.onclose = function () {
                                    common.win.alert("세션이 끊겼습니다. 다시 로그인 해주세요.")
                                    $p.url("/index.html");
                                };

                                ws.onerror = function (e) {
                                    console.error("WebSocket error observed:", e);
                                };

                                ws.onmessage = function (e) {
                                    common.message.onMessage(e);
                                };
                            } catch (e) {
                                console.error('Sorry, the web socket at "%s" is un-available', g_config.WEBSOCKETSERVER_URL);
                            }
                        };

                        scwin.setStatus = function (data) {
                            // console.log(data);
                            scwin.webSocketCallback(data);
                        };

                        scwin.webSocketCallback = function (obj) {
                            try {

                                // 빌드 화면에 나왔을시  flag 처리 경우의 수 추가
                                var buildFlag = localStorage.getItem("_buildStatusFlag_");
                                //console.log(buildFlag);
                                //console.log(scwin.screenScopeObj);
                                if (buildFlag == "build_view") {
                                    scwin.screenScopeObj.webSocketCallback(obj);
                                } else if (buildFlag == "building") {

                                    // index.xml build status 수행
                                    // build status 처리 구간

                                    // obj.msgType : HV_MSG_BUILD_STATUS_INFO_FROM_HEADQUATE
                                    // 플랫폼 : android, ios, windows
                                    // 상태 처리 data.message : BUILDING, CLEANBUILING, FILEUPLOADING, SUCCESSFUL, FAILED
                                    // 빌드 완료 이후 :update 처리 setBranchBuildUpdate
                                    scwin.screenScopeObj.webSocketCallback(obj);
                                    scwin.buildStatusFromHeadquarter(obj);
                                } else if (obj.status == "web_build") {
                                    // index.xml build status 수행
                                    // build status 처리 구간

                                    // obj.msgType : HV_MSG_BUILD_STATUS_INFO_FROM_HEADQUATE
                                    // 플랫폼 : android, ios, windows
                                    // 상태 처리 data.message : BUILDING, CLEANBUILING, FILEUPLOADING, SUCCESSFUL, FAILED
                                    // 빌드 완료 이후 :update 처리 setBranchBuildUpdate
                                    scwin.buildStatusFromHeadquarter(obj);

                                } else {
                                    scwin.screenScopeObj.webSocketCallback(obj);
                                }

                            } catch (e) {
                                // console.log(e);
                            }

                        };

                        scwin.getBuildProjectInfo = async function () {
                            const url = common.uri.buildProjectInfo;
                            const method = "POST";
                            const headers = {"Content-Type": "application/json"};

                            await common.http.fetch(url, method, headers)
                                .then(data => {
                                    let buildproj = [];

                                    for (const row in data) {
                                        let temp = {};

                                        temp["project_id"] = data[row].project_id;
                                        temp["workspace_id"] = data[row].workspace_id;
                                        temp["project_name"] = data[row].project_name;
                                        temp["product_type"] = data[row].product_type;
                                        temp["platform"] = data[row].platform;
                                        temp["description"] = data[row].description;
                                        temp["template_version"] = data[row].template_version;
                                        temp["project_dir_path"] = data[row].project_dir_path;
                                        temp["created_date"] = data[row].created_date;
                                        temp["updated_date"] = data[row].updated_date;
                                        temp["read_yn"] = data[row].read_yn;
                                        temp["update_yn"] = data[row].update_yn;
                                        temp["delete_yn"] = data[row].delete_yn;
                                        temp["build_yn"] = data[row].build_yn;
                                        temp["deploy_yn"] = data[row].deploy_yn;
                                        temp["export_yn"] = data[row].export_yn;

                                        buildproj.push(temp);
                                    }

                                    __buildproject_data__.removeAll();
                                    var distinct = common.unique(buildproj, 'project_id');
                                    __buildproject_data__.setJSON(distinct, true);

                                    // 초기 Workspace 탭 추가
                                    scwin.add_tab("Workspace");
                                })
                                .catch(err => {
                                    common.win.alert("code:" + err.status + "\n" + "message:" + err.responseText);
                                });
                        };

                        scwin.getBuildHistoryInfo = async function () {
                            const url = common.uri.getHistoryInfo;
                            const method = "POST";
                            const headers = {"Content-Type": "application/json"};

                            await common.http.fetch(url, method, headers)
                                .then(data => {
                                    let buildHistory = [];

                                    for (const row in data) {
                                        let temp = {};

                                        temp["project_history_id"] = data[row].project_history_id;
                                        temp["project_id"] = data[row].project_id;
                                        temp["project_name"] = data[row].project_name;
                                        temp["platform"] = data[row].platform;
                                        temp["status"] = data[row].status;
                                        temp["status_log"] = data[row].status_log;
                                        temp["log_path"] = data[row].log_path;
                                        temp["result"] = data[row].result;
                                        temp["platform_build_file_path"] = data[row].platform_build_file_path;
                                        temp["qrcode"] = data[row].qrcode;
                                        temp["history_started_date"] = data[row].history_started_date;
                                        temp["history_ended_date"] = data[row].history_ended_date;

                                        buildHistory.push(temp);
                                    }

                                    __buildhistory_data__.removeAll();
                                    var distinct = common.unique(buildHistory, 'project_history_id');
                                    __buildhistory_data__.setJSON(distinct, true);
                                })
                                .catch(err => {
                                    common.win.alert("code: " + err.status + "\n" + "message: " + err.responseText);
                                });
                        };

                        scwin.logoutUpdateLastLoginDate = async function () {
                            const url = common.uri.logout;
                            const method = "GET";
                            const headers = {"Content-Type": "application/json"};

                            const response = await common.http.fetchGet(url, method, headers, {});
                            const data = await response.json();

                            if (response.status >= 200 && response.status < 300) {
                                if (g_config.PROFILES == "service") {
                                    sessionStorage.removeItem("accessToken");
                                    $p.url("/index.html");
                                } else {
                                    //location.href="/websquare/websquare.html?w2xPath=/login.xml";
                                    sessionStorage.removeItem("accessToken");
                                    $p.url("/index.html");
                                }
                            } else {
                                common.win.alert("code: " + request.status + "\n" + "message: " + request.responseText);
                            }
                        };

                        scwin.home_logo_onclick = function (e) {
                            if (g_config.PROFILES == "service") {
                                $p.url("/index.xml");
                            } else {
                                $p.url("/index.xml");
                            }
                        };

                        scwin.ui_lang_onviewchange = function () {
                            common.setLocale(ui_lang.getValue());
                        };

                        scwin.buildStatusFromHeadquarter = function (obj) {
                            // 빌드 화면에 나왔을 시 flag 처리 경우의 수 추가
                            const buildActionData = $p.parent().__buildaction_data__.getAllJSON();
                            const platform = buildActionData[0].platform;

                            if (obj.msgType == "HV_MSG_BUILD_STATUS_INFO_FROM_HEADQUATER") {
                                let message = "";
                                switch (obj.message) {
                                    case "BUILDING":
                                        message = common.getLabel("lbl_building");
                                        if (platform == "Android") {
                                            build_status_android.changeClass("state  clean", "state  build");
                                            build_status_android.setLabel(message);
                                        } else if (platform == "iOS") {
                                            build_status_ios.changeClass("state  clean", "state  build");
                                            build_status_ios.setLabel(message);
                                        }
                                        break;
                                    case "FILEUPLOADING":
                                        message = common.getLabel("lbl_app_uploading")
                                        if (platform == "Android") {
                                            build_status_android.changeClass("state  build", "state  upload");
                                            build_status_android.setLabel(message);
                                        } else if (platform == "iOS") {
                                            build_status_ios.changeClass("state  build", "state  upload");
                                            build_status_ios.setLabel(message);
                                        }
                                        break;
                                    case "SUCCESSFUL":
                                        message = common.getLabel("lbl_build_complete");
                                        if (platform == "Android") {
                                            build_status_android.setLabel(message);
                                            build_status_android.changeClass("state  upload", "state  finish");
                                        } else if (platform == "iOS") {
                                            build_status_ios.setLabel(message);
                                            build_status_ios.changeClass("state  upload", "state  finish");
                                        }

                                        $p.parent().__buildaction_data__.removeAll();
                                        break;
                                    case "FAILED":
                                        message = common.getLabel("lbl_build_failed");
                                        if (platform == "Android") {
                                            build_status_android.changeClass("state  build", "state  finish");
                                            build_status_android.setLabel(message);
                                        } else if (platform == "iOS") {
                                            build_status_ios.changeClass("state  build", "state  finish");
                                            build_status_ios.setLabel(message);
                                        }

                                        $p.parent().__buildaction_data__.removeAll();
                                        break;
                                    case "CLEANBUILING":
                                        message = common.getLabel("lbl_side_cleaning");
                                        if (platform == "Android") {
                                            build_status_android.changeClass("state  ready", "state  clean");
                                            build_status_android.setLabel(message);
                                        } else if (platform == "iOS") {
                                            build_status_ios.changeClass("state  ready", "state  clean");
                                            build_status_ios.setLabel(message);
                                        }
                                        break;
                                    default :
                                        break;
                                }
                            }
                        };

                    }}}]}]},{T:1,N:'body',A:{'ev:onpageload':'scwin.onpageload'},E:[{T:1,N:'xf:group',A:{class:'wrap admin show_menu',id:'wrap',style:''},E:[{T:1,N:'xf:group',A:{class:'header',id:'',style:''},E:[{T:1,N:'xf:group',A:{class:'header_inner',id:''},E:[{T:1,N:'xf:group',A:{class:'header_lt',id:'',style:''},E:[{T:1,N:'xf:group',A:{id:'',style:'',class:'btn_toggle_menu'},E:[{T:1,N:'w2:span',A:{label:'menu',style:'',id:''}}]},{T:1,N:'xf:group',A:{id:'',style:'',tagname:'h1'},E:[{T:1,N:'w2:anchor',A:{class:'logo',id:'',outerDiv:'false',style:'',useLocale:'true',localeRef:'lbl_whive','ev:onclick':'scwin.home_logo_onclick'},E:[{T:1,N:'xf:label'}]}]}]},{T:1,N:'xf:group',A:{class:'header_rt',id:'',style:''},E:[{T:1,N:'w2:anchor',A:{class:'btn_app','ev:onclick':'',id:'',outerDiv:'false',style:'display: none;',useLocale:'true',localeRef:'lbl_application'},E:[{T:1,N:'xf:label'}]},{T:1,N:'xf:group',A:{id:'',class:'box_btnapp'},E:[{T:1,N:'w2:anchor',A:{outerDiv:'false','ev:onclick':'scwin.anchor1_onclick',style:'',id:'btnUserSelect',class:'btn_mymenu'},E:[{T:1,N:'xf:label'}]},{T:1,N:'xf:group',A:{tagname:'ul',style:'',id:'',class:'items'},E:[{T:1,N:'xf:group',A:{class:'',id:'',style:'',tagname:'li'},E:[{T:1,N:'w2:anchor',A:{id:'anc_sitem',outerDiv:'false',style:'',useLocale:'true',localeRef:'lbl_userInfo'},E:[{T:1,N:'xf:label'}]}]},{T:1,N:'xf:group',A:{class:'',id:'',style:'',tagname:'li'},E:[{T:1,N:'w2:anchor',A:{id:'anchor2',outerDiv:'false',style:'',useLocale:'true',localeRef:'lbl_logout','ev:onclick':'scwin.logoutUpdateLastLoginDate'},E:[{T:1,N:'xf:label'}]}]}]}]},{T:1,N:'xf:trigger',A:{class:'btn_theme',id:'trigger1',style:'',type:'button',useLocale:'true',localeRef:'lbl_theme','ev:onclick':'scwin.trigger1_onclick'},E:[{T:1,N:'xf:label'}]}]}]}]},{T:1,N:'xf:group',A:{class:'sidebox'},E:[{T:1,N:'xf:group',A:{class:'side_list'},E:[{T:1,N:'xf:generator',A:{id:'gen_menu'},E:[{T:1,N:'xf:group',A:{class:'side_item'},E:[{T:1,N:'w2:anchor',A:{id:'menu_label',outerDiv:'false'},E:[{T:1,N:'xf:label'}]},{T:1,N:'xf:generator',A:{id:'gen_submenu',class:'dep2',tagname:'ul'},E:[{T:1,N:'xf:group',A:{id:'',tagname:'li'},E:[{T:1,N:'w2:anchor',A:{id:'submenu_label',outerDiv:'false'},E:[{T:1,N:'xf:label'}]}]}]}]}]}]}]},{T:1,N:'xf:group',A:{class:'container',id:'',style:''},E:[{T:1,N:'xf:group',A:{class:'sub_contents',id:'',style:''},E:[{T:1,N:'w2:tabControl',A:{alwaysDraw:'false',class:'tabc_layout',confirmFalseAction:'new',confirmTrueAction:'exist',focusOnStart:'true',id:'tabc_layout',processMsgFrame:'',style:'',useConfirmMessage:'false',useMoveNextTabFocus:'',useTabKeyOnly:'true',tabScroll:'true'}},{T:1,N:'xf:trigger',A:{class:'btn_tab_close',id:'',style:'',type:'button',useLocale:'true',localeRef:'lbl_close'},E:[{T:1,N:'xf:label'}]}]}]}]},{T:1,N:'xf:group',A:{id:'',class:'alertbox',style:''},E:[{T:1,N:'xf:group',A:{style:'width:260px;display:none;',id:'',class:'layer messagebox'},E:[{T:1,N:'xf:group',A:{style:'margin-bottom: 0;',id:'',class:'dfbox'},E:[{T:1,N:'xf:group',A:{id:'',class:'fl'},E:[{T:1,N:'w2:textbox',A:{style:'font-size:12px;text-align:left;line-height: 26px;',id:'',label:'hong@inswave.com',class:'head_tit'}}]},{T:1,N:'xf:group',A:{id:'',class:'fr'},E:[{T:1,N:'xf:trigger',A:{style:'',id:'',type:'button',class:'btn_cm close'},E:[{T:1,N:'xf:label'}]}]}]},{T:1,N:'xf:group',A:{style:'',id:'',class:'form_box'},E:[{T:1,N:'xf:group',A:{style:'',id:'',class:'dfbox'},E:[{T:1,N:'xf:group',A:{id:'',class:'fl'},E:[{T:1,N:'w2:textbox',A:{style:'',id:'',label:'Delete',class:'df_subtit'}},{T:1,N:'w2:textbox',A:{style:'',id:'',label:'Are you sure you want to delete it?',class:'df_sub'}}]}]},{T:1,N:'xf:group',A:{style:'',id:'',class:'btnbox'},E:[{T:1,N:'xf:trigger',A:{style:'',id:'',type:'button',class:'',useLocale:'true',localeRef:'lbl_cancel'},E:[{T:1,N:'xf:label'}]},{T:1,N:'xf:trigger',A:{style:'',id:'',type:'button',class:'conf',useLocale:'true',localeRef:'lbl_delete'},E:[{T:1,N:'xf:label'}]}]}]}]}]},{T:1,N:'xf:group',A:{style:'width:460px;display:none;',id:'',class:'layer pop_admin'},E:[{T:1,N:'xf:group',A:{id:'',class:'dfbox'},E:[{T:1,N:'xf:group',A:{id:'',class:'fl'},E:[{T:1,N:'w2:textbox',A:{style:'',id:'',label:'Monitoring',class:'head_tit'}}]},{T:1,N:'xf:group',A:{style:'',id:'',class:'fr'},E:[{T:1,N:'xf:trigger',A:{style:'',id:'',type:'button',class:'btn_close_sm',useLocale:'true',localeRef:'lbl_close'},E:[{T:1,N:'xf:label'}]}]}]},{T:1,N:'xf:group',A:{style:'',id:'',class:'dfbox'},E:[{T:1,N:'xf:group',A:{id:'',class:'fl'},E:[{T:1,N:'w2:textbox',A:{style:'',id:'',label:'Your information',class:'df_tit sub_tit'}}]}]},{T:1,N:'xf:group',A:{style:'',id:'',class:'shbox'},E:[{T:1,N:'xf:group',A:{style:'',id:'',class:'shbox_inner'},E:[{T:1,N:'xf:group',A:{adaptive:'layout',adaptiveThreshold:'768',tagname:'table',style:'',id:'',class:'w2tb tb '},E:[{T:1,N:'w2:attributes',E:[{T:1,N:'w2:summary'}]},{T:1,N:'xf:group',A:{tagname:'colgroup'},E:[{T:1,N:'xf:group',A:{tagname:'col',style:'width:70px;'}},{T:1,N:'xf:group',A:{tagname:'col',style:''}}]},{T:1,N:'xf:group',A:{tagname:'tr',style:'',id:'',class:''},E:[{T:1,N:'xf:group',A:{tagname:'th',style:'',class:'w2tb_th'},E:[{T:1,N:'w2:textbox',A:{style:'',id:'',label:'E-mail',class:''}}]},{T:1,N:'xf:group',A:{tagname:'td',style:'',class:'w2tb_td'},E:[{T:1,N:'xf:input',A:{style:'width:70px;',id:'',placeholder:'',class:''}},{T:1,N:'w2:textbox',A:{class:'',dataType:'',id:'',label:'@',style:'',tagname:'span'}},{T:1,N:'xf:select1',A:{ref:'',submenuSize:'auto',appearance:'minimal',disabledClass:'w2selectbox_disabled',chooseOption:'',disabled:'false',style:'width:70px;',allOption:'true',id:'',renderType:'',class:'',direction:'auto'},E:[{T:1,N:'xf:choices',E:[{T:1,N:'xf:item',E:[{T:1,N:'xf:label',E:[{T:4,cdata:'직접입력'}]},{T:1,N:'xf:value'}]}]}]}]}]},{T:1,N:'xf:group',A:{tagname:'tr',id:''},E:[{T:1,N:'xf:group',A:{tagname:'th',class:'w2tb_th'},E:[{T:1,N:'w2:attributes',E:[{T:1,N:'w2:scope',E:[{T:3,text:'row'}]}]},{T:1,N:'w2:textbox',A:{style:'',id:'',label:'Type',class:''}}]},{T:1,N:'xf:group',A:{tagname:'td',class:'w2tb_td'},E:[{T:1,N:'w2:attributes'},{T:1,N:'xf:input',A:{style:'width:100%;',id:'',placeholder:'',class:''}}]}]},{T:1,N:'xf:group',A:{tagname:'tr',id:''},E:[{T:1,N:'xf:group',A:{tagname:'th',class:'w2tb_th'},E:[{T:1,N:'w2:attributes',E:[{T:1,N:'w2:scope',E:[{T:3,text:'row'}]}]},{T:1,N:'w2:textbox',A:{style:'',id:'',label:'',class:'',useLocale:'true',localeRef:'lbl_password'}}]},{T:1,N:'xf:group',A:{tagname:'td',class:'w2tb_td'},E:[{T:1,N:'w2:attributes'},{T:1,N:'xf:group',A:{style:'',id:'',class:'flex'},E:[{T:1,N:'xf:input',A:{style:'width:90px;',id:'',placeholder:'',class:''}},{T:1,N:'xf:trigger',A:{style:'',id:'',type:'button',class:'btn_cm pt',useLocale:'true',localeRef:'lbl_change_password'},E:[{T:1,N:'xf:label'}]}]}]}]}]}]},{T:1,N:'xf:group',A:{style:'',id:'',class:'btn_shbox'},E:[{T:1,N:'xf:trigger',A:{disabled:'',style:'',id:'',type:'button',class:'btn_cm sch',escape:'false',useLocale:'true',localeRef:'lbl_search'},E:[{T:1,N:'xf:label'}]}]}]},{T:1,N:'xf:group',A:{style:'',id:'',class:'dfbox'},E:[{T:1,N:'w2:textbox',A:{style:'',id:'',label:'Your web service domain',class:'df_tit fl'}},{T:1,N:'xf:group',A:{style:'',id:'',class:'fr'},E:[{T:1,N:'xf:trigger',A:{style:'',id:'',type:'button',class:'btn_cm  row_add',useLocale:'true',localeRef:'lbl_add'},E:[{T:1,N:'xf:label'}]},{T:1,N:'xf:trigger',A:{style:'',id:'',type:'button',class:'btn_cm  row_del',useLocale:'true',localeRef:'lbl_delete'},E:[{T:1,N:'xf:label'}]}]}]},{T:1,N:'xf:group',A:{adaptiveThreshold:'',style:'',id:'',class:'gvwbox'},E:[{T:1,N:'w2:gridView',A:{scrollByColumnAdaptive:'false',rowNumVisible:'true',dataList:'data:dataList1',scrollByColumn:'false',style:'height: 100px;',rowNumHeaderValue:'No',autoFit:'allColumn',id:'',visibleRowNum:'5',class:'wq_gvw',defaultCellHeight:'20',checkReadOnlyOnPasteEnable:''},E:[{T:1,N:'w2:caption',A:{style:'',id:'caption2',value:'this is a grid caption.'}},{T:1,N:'w2:header',A:{style:'',id:'header2'},E:[{T:1,N:'w2:row',A:{style:'',id:'row3'},E:[{T:1,N:'w2:column',A:{removeBorderStyle:'false',width:'50',inputType:'checkbox',style:'height:34px;',checkboxLabel:'선택',id:'column12',value:'name1',blockSelect:'false',displayMode:'label'}},{T:1,N:'w2:column',A:{removeBorderStyle:'false',width:'70',inputType:'text',style:'height:34px;',id:'column11',value:'name2',blockSelect:'false',displayMode:'label'}},{T:1,N:'w2:column',A:{removeBorderStyle:'false',width:'70',inputType:'text',style:'height:34px;',id:'column10',value:'name3',blockSelect:'false',displayMode:'label'}},{T:1,N:'w2:column',A:{removeBorderStyle:'false',width:'70',inputType:'text',style:'height:34px;',id:'column9',value:'name4',blockSelect:'false',displayMode:'label'}}]}]},{T:1,N:'w2:gBody',A:{style:'',id:'gBody2'},E:[{T:1,N:'w2:row',A:{style:'',id:'row4'},E:[{T:1,N:'w2:column',A:{removeBorderStyle:'false',width:'50',inputType:'checkbox',style:'height:34px;',checkboxLabel:'선택',id:'col1',value:'',blockSelect:'false',displayMode:'label'}},{T:1,N:'w2:column',A:{removeBorderStyle:'false',width:'70',inputType:'text',style:'height:20px',id:'col2',value:'',blockSelect:'false',displayMode:'label'}},{T:1,N:'w2:column',A:{removeBorderStyle:'false',width:'70',inputType:'text',style:'height:20px',id:'col3',value:'',blockSelect:'false',displayMode:'label'}},{T:1,N:'w2:column',A:{removeBorderStyle:'false',width:'70',inputType:'text',style:'height:20px',id:'col4',value:'',blockSelect:'false',displayMode:'label'}}]}]}]}]},{T:1,N:'xf:group',A:{id:'',class:'fr'},E:[{T:1,N:'xf:group',A:{style:'',id:'',class:'btnbox'},E:[{T:1,N:'xf:trigger',A:{style:'',id:'',type:'button',class:'btn_org_line',useLocale:'true',localeRef:'lbl_cancel'},E:[{T:1,N:'xf:label'}]},{T:1,N:'xf:trigger',A:{style:'',id:'',type:'button',class:'btn_org',useLocale:'true',localeRef:'lbl_save'},E:[{T:1,N:'xf:label'}]}]}]}]},{T:1,N:'xf:group',A:{class:'dim',id:'',style:'display:none;'}},{T:1,N:'xf:group',A:{class:'loadingBox',id:'',style:'display:none;'},E:[{T:1,N:'xf:group',A:{class:'spinner',id:'',style:''},E:[{T:1,N:'xf:group',A:{class:'',id:'',style:''}},{T:1,N:'xf:group',A:{class:'rect2',id:'',style:''}},{T:1,N:'xf:group',A:{class:'rect3',id:'',style:''}},{T:1,N:'xf:group',A:{class:'rect4',id:'',style:''}},{T:1,N:'xf:group',A:{class:'rect5',id:'',style:''}}]}]}]}]}]})