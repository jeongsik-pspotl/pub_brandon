<?xml version="1.0" encoding="UTF-8"?>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ev="http://www.w3.org/2001/xml-events"
      xmlns:w2="http://www.inswave.com/websquare" xmlns:xf="http://www.w3.org/2002/xforms">
    <head>
        <w2:type>DEFAULT</w2:type>
        <w2:buildDate/>
        <xf:model>
            <xf:instance>
                <data xmlns=""/>
            </xf:instance>
            <w2:dataCollection baseNode="map">
            </w2:dataCollection>
            <w2:workflowCollection>
            </w2:workflowCollection>
        </xf:model>
        <script type="text/javascript" lazy="false">
			 <![CDATA[

            scwin.onpageload = function() {

                common.setScopeObj(scwin);
                // $p.parent().scwin.selected_step(1);

                step1_select_platform.setSelectedIndex(0);
                step1_select_templatev.setSelectedIndex(0);
                localStorage.setItem("_platform_",step1_select_platform.getValue());

            };

            scwin.onpageunload = function() {

            };

            // 2 on message
            scwin.webSocketCallback = function(obj) {
                // msg type 추가
                // console.log(" project add websocket ");
                switch (obj.msgType) {
                    case "HV_MSG_CONNETCION_CHECK_INFO_FROM_HEADQUATER" :
                        scwin.setBranchConnectionStatus(obj);
                        break;
                    case "HV_MSG_CONNETCION_CHECK_INFO" :
                        scwin.setBranchConnectionStatus(obj);
                        break;
                    default :
                        break;
                }
            };

            scwin.setBranchConnectionStatus = function ( data ) {
                switch (data.message) {
                    case "SUCCESSFUL" :
                        var label = common.getLabel("lbl_successful");
                        step1_btn_testconnection.setLabel(label);
                        step1_btn_testconnection.setDisabled(true);
                        scwin.connect_build_server_yn = true;
                        var message = common.getLabel("lbl_connection_successful");
                        alert(message);
                        break;
                    case "FAILD" :
                        var label = common.getLabel("lbl_failed");
                        step1_btn_testconnection.setLabel(label);
                        step1_btn_testconnection.setDisabled(false);
                        scwin.connect_build_server_yn = false;
                        var message = common.getLabel("lbl_connection_failed");
                        alert(message);
                        break;
                    default :
                        break;
                }

            };

            scwin.testConnection = function(){
                // websocket connect test
                ws.send(JSON.stringify({"msgType":"HV_MSG_CONNETCION_CHECK_INFO","sessType":"BRANCH"}));

            };


            // send websocket data
            scwin.send_test_websocket_data = function(project_name){
                // var data = {};
                // data.project_name = project_name;
                // var options = {};
                ws.send(project_name);

            };

            scwin.btn_prev_onclick = function(e){

            };

            scwin.btn_next_onclick = function(e){
                //if(scwin.checkData()){
                    // $p.parent().scwin.selected_step(2);
                //}
            };

            scwin.step1_btn_testconnection_onclick = function(){
                scwin.testConnection();

            };

            scwin.step1_select_platform_onchange = function(e){
                var platform = this.getValue(this.getSelectedIndex);
                localStorage.setItem("_platform_",platform);
            };

            scwin.step1_btn_check_project_name_onclick = function(e){
                var data = {};
                var msgType = step1_input_msgType.getValue();
                var sessType = step1_input_sessType.getValue();
                var platform = step1_select_platform.getValue();
                var target = step1_input_buildserver.getValue();
                var Value = step1_input2_value.getValue();
                data.msgType = msgType;
                data.sessType = sessType;
                data.platform = platform;
                data.target = target;

                // alert(JSON.stringify({"msgType":msgType, "sessType":sessType, "platform":platform,"target":target, "path":Value}));
                scwin.send_test_websocket_data(JSON.stringify({"msgType":msgType, "sessType":sessType, "platform":platform,"target":target, "path":Value, "workspaceID":31, "projectID":106}));

            };

            ]]></script>
    </head>
    <body ev:onpageload="scwin.onpageload" ev:onpageunload="scwin.onpageunload">
        <xf:group class="gallery_box" id="" style="">
            <xf:group class="dfbox" id="" style="">
                <w2:textbox class="gal_tit" id="" label="" style="" useLocale="true" localeRef="lbl_testPage_test"></w2:textbox>
            </xf:group>
            <xf:group class="gal_body" id="" style="">
                <xf:group id="" style="" class="form_wrap">
                    <xf:group id="" style="" class="" tagname="ul">
                        <xf:group id="" style="" class="" tagname="li">
                            <w2:textbox id="" style="" class="form_name" label="" useLocale="true" localeRef="lbl_testPage_messageType"></w2:textbox>
                            <xf:input id="step1_input_msgType" style="" adjustMaxLength="false"></xf:input>
                        </xf:group>
                        <xf:group id="" style="" class="" tagname="li">
                            <w2:textbox id="" style="" class="form_name" label="" useLocale="true" localeRef="lbl_testPage_sessionType"></w2:textbox>
                            <xf:input id="step1_input_sessType" style="" adjustMaxLength="false"></xf:input>
                        </xf:group>
                        <xf:group id="" style="" class="" tagname="li">
                            <w2:textbox id="" style="" class="form_name" label="" useLocale="true" localeRef="lbl_testPage_platform"></w2:textbox>
                            <xf:select1 renderType="native" id="step1_select_platform" disabledClass="w2selectbox_disabled" ref="" appearance="minimal" style="" direction="auto" chooseOption="" allOption="" displayMode="label" disabled="false" submenuSize="auto" ev:onchange="scwin.step1_select_platform_onchange">
                                <xf:choices>
                                    <xf:item>
                                        <xf:label><![CDATA[Android]]></xf:label>
                                        <xf:value><![CDATA[Android]]></xf:value>
                                    </xf:item>
                                    <xf:item>
                                        <xf:label><![CDATA[Windows]]></xf:label>
                                        <xf:value><![CDATA[Windows]]></xf:value>
                                    </xf:item>
                                    <xf:item>
                                        <xf:label><![CDATA[iOS]]></xf:label>
                                        <xf:value><![CDATA[iOS]]></xf:value>
                                    </xf:item>
                                </xf:choices>
                            </xf:select1>
                        </xf:group>
                        <xf:group id="" style="" class="" tagname="li">
                            <w2:textbox id="" style="" class="form_name" label="" useLocale="true" localeRef="lbl_testPage_template"></w2:textbox>
                            <xf:select1 renderType="native" id="step1_select_templatev" disabledClass="w2selectbox_disabled" ref="" appearance="minimal" style="" direction="auto" chooseOption="" displayMode="label" allOption="" submenuSize="auto" disabled="false">
                                <xf:choices>
                                    <xf:item>
                                        <xf:label><![CDATA[1.1.2]]></xf:label>
                                        <xf:value>1.1.2</xf:value>
                                    </xf:item>
                                    <xf:item>
                                        <xf:label><![CDATA[1.1.1]]></xf:label>
                                        <xf:value>1.1.1</xf:value>
                                    </xf:item>
                                    <xf:item>
                                        <xf:label><![CDATA[1.1.0]]></xf:label>
                                        <xf:value>1.1.0</xf:value>
                                    </xf:item>
                                </xf:choices>
                            </xf:select1>
                        </xf:group>
                        <xf:group id="" style="" class="" tagname="li">
                            <w2:textbox id="" style="" class="form_name" label="" useLocale="true" localeRef="lbl_testPage_buildServer"></w2:textbox>
                            <xf:group id="" style="" class="ipt_box">
                                <xf:input id="step1_input_buildserver" style="" adjustMaxLength="false"></xf:input>
                                <xf:trigger id="step1_btn_testconnection" style="" class="btn_cm" type="button" ev:onclick="scwin.step1_btn_testconnection_onclick"
                                            useLocale="true" localeRef="lbl_testPage_connection">
                                    <xf:label><![CDATA[]]></xf:label>
                                </xf:trigger>
                            </xf:group>
                        </xf:group>
                        <xf:group id="" style="" class="" tagname="li">
                            <w2:textbox id="" style="" class="form_name" label="" useLocale="true" localeRef="lbl_testPage_key"></w2:textbox>
                            <xf:input id="step1_input2_key" style="" adjustMaxLength="false"></xf:input>
                            <w2:textbox id="" style="" class="form_name" label="" useLocale="true" localeRef="lbl_testPage_value"></w2:textbox>
                            <xf:input id="step1_input2_value" style="" adjustMaxLength="false"></xf:input>
                        </xf:group>
                    </xf:group>
                    <xf:group id="" style="" class="" tagname="ul">
                        <xf:group id="" style="" class="" tagname="li">
                            <w2:textbox id="" style="" class="form_name" label="" useLocale="true" localeRef="lbl_testPage_jsonTest"></w2:textbox>
                            <xf:textarea id="test_txtarea_desc" style="width:100%;height:100px;"></xf:textarea>
                        </xf:group>
                    </xf:group>
                    <xf:trigger id="" style="" class="btn_cm" type="button" ev:onclick="scwin.step1_btn_check_project_name_onclick" useLocale="true" localeRef="lbl_testPage_start">
                        <xf:label><![CDATA[]]></xf:label>
                    </xf:trigger>
                    <xf:group id="" style="" class="" tagname="ul">
                        <xf:group id="" style="" class="" tagname="li">
                            <w2:textbox id="" style="" class="form_name" label="" useLocale="true" localeRef="lbl_testPage_result"></w2:textbox>
                            <xf:textarea id="step2_txtarea_desc" style="width:100%;height:100px;"></xf:textarea>
                        </xf:group>
                    </xf:group>
                </xf:group>
                <!--				<w2:anchor class="gal_prev" id="btn_prev" outerDiv="false" style="" ev:onclick="scwin.btn_prev_onclick">-->
                <!--    				<xf:label><![CDATA[이전]]></xf:label>-->
                <!--    			</w2:anchor>-->
<!--                <w2:anchor class="gal_next" id="btn_next" outerDiv="false" style="" ev:onclick="scwin.btn_next_onclick">-->
<!--                    <xf:label><![CDATA[다음]]></xf:label>-->
<!--                </w2:anchor>-->
            </xf:group>
        </xf:group>
    </body>
</html>
