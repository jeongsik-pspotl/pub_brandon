<?xml version="1.0" encoding="UTF-8"?>
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ev="http://www.w3.org/2001/xml-events"
    xmlns:w2="http://www.inswave.com/websquare" xmlns:xf="http://www.w3.org/2002/xforms">
    <head>
    	<w2:type>DEFAULT</w2:type>
        <w2:buildDate/>
        <xf:model>
            <xf:instance>
                <data xmlns=""/>
            </xf:instance>
            <w2:dataCollection baseNode="map">
            </w2:dataCollection>
            <w2:workflowCollection>
            </w2:workflowCollection>
        </xf:model>
         <script type="text/javascript" lazy="false"><![CDATA[
	scwin.onpageload = function() {
		common.setScopeObj(scwin);
		var buildhistory_json = $p.parent().__buildhistory_data__.getAllJSON();

		scwin.setBuildHistoryInfo(buildhistory_json);

	};
	
	scwin.onpageunload = function() {

	};


	scwin.initPage = function () {
		// var favorite_workspace_json = $p.parent().__favorite_workspace__.getAllJSON();
		// var workspace_json = $p.parent().__workspace_data__.getAllJSON();
		// scwin.getBuildHistoryInfo();


		// scwin.setWorkspace(workspace_json, buildproj_json);
	};

	scwin.setBuildHistoryInfo = function(buildhistory_json){

		var count = 0;

		for (var idx in buildhistory_json) {

				list_buildhistory_generator.insertChild();

				//set icon
				var span_icon = list_buildhistory_generator.getChild(idx, "history_platform_icon");
				var txt_proj_name = list_buildhistory_generator.getChild(idx, "history_project_name");
				// btn_build.setUserData("platform",buildproj_json[idx2].platform);
				// btn_build.setUserData("projectName",buildproj_json[idx2].project_name);
				// btn_build.setUserData("workspaceName",workspace_json[item_idx].workspace_name);


				if (buildhistory_json[idx].platform == "Android") {
                    var message = common.getLabel("lbl_android");
					span_icon.changeClass("ico_ios","ico_and");
					span_icon.setValue(message);
				} else {
                    var message = common.getLabel("lbl_ios");
					span_icon.changeClass("ico_and","ico_ios");
					span_icon.setValue(message);
				}
				txt_proj_name.setValue(buildhistory_json[idx].project_name);
				// console.log(" project_name :  "+buildhistory_json[idx].project_name);
		}

	};

	]]></script>
    </head>
    <body ev:onpageload="scwin.onpageload" ev:onpageunload="scwin.onpageunload">
    	<xf:group class="sub_contents" id="" style="">
    		<xf:group id="" style="" class="white_board">
    			<xf:group id="" style="" class="pgtbox">
    				<w2:textbox id="" style="" class="pgt_tit fl" label="" useLocale="true" localeRef="lbl_history_main_title"></w2:textbox>
    			</xf:group>
    			<xf:group id="" style="" class="record_box">
					<w2:generator style="" id="list_buildhistory_generator" class="">
						<xf:group id="" style="" class="item">
							<xf:group id="" style="" class="rec_tit">
								<w2:span id="history_platform_icon" style="" class="ico_and" label="" useLocale="true" localeRef="lbl_android"></w2:span>
								<w2:textbox id="history_project_name" style="" class="txt_name" label="" useLocale="true" localeRef="lbl_history_main_history_project_name"></w2:textbox>
							</xf:group>
							<w2:anchor id="" style="" outerDiv="false" class="btn_record" useLocale="true" localeRef="lbl_insert_text">
								<xf:label><![CDATA[]]></xf:label>
							</w2:anchor>
						</xf:group>
					</w2:generator>
    			</xf:group>
    		</xf:group>
    	</xf:group>
    </body>
</html>
